(function(h){var v=window.AmazonUIPageJS||window.P,x=v._namespace||v.attributeErrors,c=x?x("DetailPageTwisterViewAsset",""):v;c.guardFatal?c.guardFatal(h)(c,window):c.execute(function(){h(c,window)})})(function(h,v,x){h.when("A","dp-refresh-handler","view-util","twister-string-constants","dp-interactive-page-refresh-handler","twister-dimension-subview-promise-handler").register("page-refresh-view",function(c,G,m,n,w,r){function t(r,u,l){function t(b){return{chunk:function(d){var e=d.ASIN,b=d.Value;
d=d.FeatureName;if(!g.hiddenFeatures[d]){var a=d,f,k;try{a&&b&&b.content&&(k=b.content[a],"undefined"!==typeof k&&(f=p("#"+a),f.html(k),f.css({opacity:""})))}catch(l){a=a||"NoFeatureName",B.logFatal(l,{message:"Error in feature"+a})}g.twisterRefreshHandler.stampFeature(a,e);"twister-slot-price_feature_div"==d&&(e=b?b.content:null,f=p(".swatchSelect .twisterSwatchPrice").html(),b=p(".swatchSelect .price_slot_ppu").html(),f&&e&&e.priceToSet&&(f=c.trim(f),e.priceToSet!==f&&(p(".swatchSelect .twisterSwatchPrice").html(e.priceToSet),
y("twisterUpdatePriceMismatch"))),b&&e&&e.hasPricePerUnit&&e.pricePerUnitDisplay&&(b=c.trim(b),e.pricePerUnitDisplay!==b&&(p(".swatchSelect .price_slot_ppu").html(e.pricePerUnitDisplay),y("twisterUpdatePricePerUnitMismatch"))))}},success:function(b,e,g){y("twisterUpdateSuccess");w.updateRenderTime()},error:function(b,e,g){Twister.$("#variations-overlay").hide();y("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(b){B.logFatal("Ajax aborted: "+
b)},timeout:4E4}}function C(b,d,e,g,a){var f=[];"parent"===b?(d=q(d,g,"parent",a),f.parent=d,d=q(e,g,"partial",a),f.partial=d):(d=q(e,g,b,a),f[b]=d);return f}function z(b,d,e,k,a){for(var f in b)if(b.hasOwnProperty(f)){if("full"===f){var l=e.dimensionType,n=g.twisterUtil.getDimensionInfo().length,m=e.dimensionDisplayType,w=e.newAsin,q=a&&(c.state("dp-twister-csm")||{}).updateCSMPageTypeId;g.twisterRefreshHandler.startMeasurement(w,l,n,m,q?w:void 0,q?["is-twister","parentAsin-"+D]:void 0)}l=b[f].twisterRefreshParams;
n=b[f].notifyClientParams;a&&(p(g.config[f].affectedFeatures).css({opacity:.5}),g.twisterRefreshHandler.doPageRefresh(null,l,d,k));I(n.asin,n.id,f,a)}}function k(){p.each(u.contextMetaData,function(b,d){var e={};d=d.elementList||[];var k=d.length,a=[];e.click={};e.mouseOver={};for(var f=0;f<k;f++){var c=p("#"+d[f].divToUpdate);a.push("#"+d[f].divToUpdate);c.length&&d[f].customClientFunction&&(d[f].updateOnHover&&(e.mouseOver[d[f].divToUpdate]=c.attr("customfunctionname")),e.click[d[f].divToUpdate]=
c.attr("customfunctionname"))}g.config[b].affectedFeatures=a.join(",");g.config[b].clientFeatures=e})}function I(b,d,e,c){var a="",a=c?n.EVENT_TYPE_CLICK:n.EVENT_TYPE_MOUSEOVER;p.each(g.config[e].clientFeatures[a],function(a,e){try{var c=function(){g.twisterRefreshHandler.stampImageLoad(b)};(function(){var a={};a.P=h;(function(){eval("var P \x3d this.P;");eval("0, "+e)(d,DetailPage.StateController,c)}).call(a)})()}catch(k){B.logFatal("Client feature - "+a+", threw and exception :- "+k)}})}function q(b,
d,e,k){var a={},f={};a.asinList=b;a.id="parent"===e?b:"partial"===k?d:b;a.mType=e;a=J(e,a);e=!1;(k=c.state("pwState"))&&(e=k.isTryState);e&&(a.isTryState=e);a=g.twisterRefreshHandler.createCustomParamsMap({},a);f.asin=b;f.id=d;return{twisterRefreshParams:a,notifyClientParams:f}}function J(b,d){p.each(u.contextMetaData[b].mTypeSpecificURLParams,function(b,g){d[b]=g});return d}function x(b){b=g.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(b.selected_variation_values);g.twisterUtil.isFullySelected(b)?
g.currentPageSelectionState="full":g.currentPageSelectionState="partial"}function K(b){var d={};d.config=b.measurement;d.dimensionDisplayType=b.dimensionsDisplayType;d.storeID=b.storeID;d.productGroupID=b.productGroupID;return d}function L(b){b=b.immutableURLPrefix;var d=null;-1!=b.indexOf("?")&&(b=b.split("?")[1],0<b.length&&(d={},b=b.split("\x26"),c.each(b,function(b){b=b.split("\x3d");d[b[0]]=b[1]})),d.isFlushing=2,d.dpEnvironment=Twister.dpEnvironment);return d}function E(b,d){var e;"partial"===
b&&"partial"===d&&(e="partial");"partial"===b&&"full"===d&&(e="full");"full"===b&&"partial"===d&&(e="parent");"full"===b&&"full"===d&&(e="full");return e}var g=this,D=u.parent_asin,A=v.ue,F="",B=new l("dpTwisterPageRefreshView");this.twisterUtil=r.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};g.viewUtil=new m(r);g.subType;var y=function(b){A&&A.count&&
A.count(b,(A.count(b)||0)+1)};(function(){x(u);k();var b={featureName:g.twisterFeatureName},d=K(u);g.twisterRefreshHandler=new G(b,null,d);b=L(u.twisterUpdateURLInfo);g.twisterRefreshHandler.addParams(b);r.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(b,d){var a={};if(b!==n.METADATA){var a={},f;f=void 0;if(d)switch(b){case n.VARIATION_CHANGE:f=d.selected().selInfo;break;case n.VARIATION_PEEK:f=d.peek().selInfo}a.selectionInfo=f;a.dimensionCombination=
g.viewUtil.getCurrDimCombId(a.selectionInfo,"_","X");f=g.twisterUtil.isFullySelected(a.dimensionCombination);a.childAsin=g.twisterUtil.getAsinFromSelectionInfo(a.selectionInfo,f);a.newPageSelectionState=f?"full":"partial";a.mTypeForRefresh=E(g.currentPageSelectionState,a.newPageSelectionState);a.newAsin="parent"===a.mTypeForRefresh?D:a.childAsin;a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1;a.twisterCallListParams=C(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState);
a.optionsForTwisterRefresh=t(d);a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:F,dimensionDisplayType:u.dimensionsDisplayType}}switch(b){case n.VARIATION_CHANGE:g.subType!==n.PRODUCTIZED_VIEW_SUBTYPE&&(z(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),g.currentPageSelectionState=a.newPageSelectionState,g.subType=void 0);break;case n.METADATA:switch(d.subType){case n.DP_STATE_VIEW_SUBTYPE:F=d.divMetadata.dimDisplayType;break;case n.PRODUCTIZED_VIEW_SUBTYPE:g.subType=
d.subType,a.dimensionCombination=d.newDimCombID,a.childAsin=d.childAsin,a.newAsin=d.newAsin,a.newPageSelectionState=g.twisterUtil.isFullySelected(a.dimensionCombination)?"full":"partial",a.mTypeForRefresh=E(g.currentPageSelectionState,a.newPageSelectionState),a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1,a.twisterCallListParams=C(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState),a.optionsForTwisterRefresh=t(d),a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:d.divMetaData?
d.divMetaData.dimDisplayType:void 0,dimensionDisplayType:u.dimensionsDisplayType},z(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),g.currentPageSelectionState=a.newPageSelectionState}}}})})()}var p=c.$;r.registerDimensionSubView("page-refresh-view",t);return t});h.when("A").register("twister-common-constants",function(c){return{FAMILY_SIZE_BUCKET_LIMITS:[0,3,8,25,50,100,1E3,5E3],DEFAULT_SELECTION_TAG:"defaultSelection",BottomSheet:{TRIGGERING_CRITERION_BOTTOMSHEET_OPEN:"onBottomsheetOpen",
BOTTOM_SHEET_SELECTOR:"#twister_bottom_sheet",OVERFLOW_THRESHOLD:8,BOTTOM_SHEET_INIT_TIME:"dpBottomSheetInitTime",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted"},SortingFiltering:{PRICE_SORT_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetSortingToggleSwitchClickOn",PRICE_SORT_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetSortingToggleSwitchClickOff",PRICE_SORT_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPriceSortingToggleSwitchEnabledStatus",PRIME_FILTER_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOn",
PRIME_FILTER_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOff",PRIME_FILTER_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchEnabledStatus",SORTING_TYPE_PRICE:"price",SORTING_TYPE_UNSORTED:"unsorted",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted",TOGGLE_SWITCH_STATE_OFF:"off",TOGGLE_SWITCH_STATE_ON:"on",PRICE_SORTING_ENABLED_PARAMETER:"priceSortingEnabled",PRICE_SORTING_PRIORITY_NAME_PARAMETER:"priceSortingPriorityName",ALTER_TYPE_NAME_PRICE:"price",
ALTER_TYPE_NAME_PRIME:"prime",ALTER_SUB_TYPE_ENABLE:"enable",ALTER_SUB_TYPE_DISABLE:"disable",ALTER_TYPE_SORT:"sort",ALTER_TYPE_FILTER:"filter",PRICE_SORT_TOGGLE_SWITCH_SELECTOR:".priceSortToggleSwitch",PRIME_FILTER_TOGGLE_SWITCH_SELECTOR:".primeFilterToggleSwitch",EXPERIMENT_PRICE_SORTING:"priceSorting",EXPERIMENT_PRIME_FILTERING:"primeFiltering",ATTRIBUTE_PRICE_SORTING_PRIORITY:"priorityName",ATTRIBUTE_SORT_BY_PRICE_STRING:"sortByPriceString",ATTRIBUTE_SORTED_BY_PRICE_STRING:"sortedByPriceString",
ATTRIBUTE_TOOL_NAME:"toolName",TOOL_TYPE_TOGGLE_SWITCH:"toggleSwitch"}}});"use strict";h.when("A","twister-util","ready").execute(function(c,h){var m=v.ue;if(void 0!==c.state("dimensionKeyList"))for(var n in c.state("dimensionKeyList").dimensionKeys)void 0!==n&&(c.on("a:popover:beforeShow:mobile-twister_"+n,function(n){void 0===c.state("twisterInteractability")&&m&&"function"===typeof m.count&&m.count("Twister:blankTwisterSecView",(m.count("Twister:blankTwisterSecView")||0)+1)}),c.on("a:popover:beforeHide:mobile-twister_"+
n,function(c){if(c&&c.popover){c=c.popover.getContent();var n=0<c.find(".aw-twister-row:first").length;c&&!n&&m&&"function"===typeof m.count&&m.count("blankTwisterSecondaryView",(m.count("blankTwisterSecondaryView")||0)+1)}}))});"use strict";h.when("A").register("twister-bottom-sheet-container",function(c){return{getInstance:function(){return this.sheetViewInstance},saveInstance:function(h){this.sheetViewInstance=h;c.trigger("dp:sheet:twister:initialized")}}});"use strict";h.when("A","a-sheet","jQuery",
"ready").execute(function(c,h,m){c.on("a:sheet:afterShow:bottom_sheet_mediaMatrix",function(){var c=m("#mediaMatrix_bottomSheet_view_div").find("#format-picker-scroller"),h=c.find("#selected-format"),r=h.offset().left,t=Math.abs(h.width()),h=Math.max(document.documentElement.clientWidth,v.innerWidth||0),t=h-t,p=c.scrollLeft();(r>t||0>=r)&&c.scrollLeft(p+r-h/3)})});h.when("A","view-util","twister-string-constants").register("hover-refresh-view",function(c,v,m){var n=c.$;return function(w,r,t){function p(){c.each(r.contextMetaData,
function(c,n){var k={};c=c.elementList||[];var h=c.length;k.mouseOver=[];for(var q=0;q<h;q++)c[q].customClientFunction&&c[q].updateOnHover&&k.mouseOver.push(c[q].divToUpdate);l.clientFeatures[n]=k})}function x(p,z){c.each(l.clientFeatures[z][m.EVENT_TYPE_MOUSEOVER],function(c){try{var l=n("#"+c),q;l.length&&(q=l.attr("customfunctionname"),function(){var c={};c.P=h;(function(){eval("var P \x3d this.P;");eval("0, "+q)(p,DetailPage.StateController)}).call(c)}())}catch(m){H.logFatal("Client feature - "+
feature+", threw and exception :- "+m)}})}function u(c){c=l.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(c.selected_variation_values);l.twisterUtil.isFullySelected(c)?l.currentPageSelectionState="full":l.currentPageSelectionState="partial"}var l=this,H=new t("dpTwisterHoverRefreshView");this.twisterUtil=w.util;this.twisterFeatureName="TwisterHover";this.currentPageSelectionState;this.clientFeatures={partial:{},full:{},parent:{},master:{}};l.viewUtil=new v(w);l.subType=void 0;(function(){function n(c){c=
l.viewUtil.getCurrDimCombId(c,"_","X");var k=l.twisterUtil.isFullySelected(c)?"full":"partial",h,m=l.currentPageSelectionState;"partial"===m&&"partial"===k&&(h="partial");"partial"===m&&"full"===k&&(h="full");"full"===m&&"partial"===k&&(h="parent");"full"===m&&"full"===k&&(h="full");k=[h];"parent"===h&&(k=["parent","partial"]);return{clientFeatureToRefresh:k,dimensionCombination:c}}u(r);p();w.registerPassive({viewAttribution:"DetailPageTwister",viewName:"WebTwisterHoverRefreshView"},{updateView:function(h,
k){switch(h){case m.VARIATION_PEEK:var p={};h=k.peek().selInfo;p=n(h);c.each(p.clientFeatureToRefresh,function(c){x(p.dimensionCombination,c)});case m.VARIATION_CHANGE:l.subType!==m.PRODUCTIZED_VIEW_SUBTYPE&&(h=k.selected().selInfo,k=l.viewUtil.getCurrDimCombId(h,"_","X"),l.currentPageSelectionState=l.twisterUtil.isFullySelected(k)?"full":"partial",l.subType=void 0);break;case m.METADATA:switch(k.subType){case m.PRODUCTIZED_VIEW_SUBTYPE:l.subType=k.subType,l.currentPageSelectionState=l.twisterUtil.isFullySelected(k.newDimCombID)?
"full":"partial"}}}})})()}})});