(function(f){var l=window.AmazonUIPageJS||window.P,k=l._namespace||l.attributeErrors,h=k?k("MarsContentGridAssets",""):l;h.guardFatal?h.guardFatal(f)(h,window):h.execute(function(){f(h,window)})})(function(f,l,k){function h(e,d,b){f.now(d).execute(function(){d===k&&f.when.apply(f,e).register(d,b)})}f.when("A","videojs","MarsContentGridAccessibilityProcessor").register("MarsContentGridController",function(e,d,b){return e.createClass({init:function(c,g){this._model=c;this._view=g;this._model.setVideoInstance(this._initVideoPlayer());
this._model.getHidePlayButton()&&this._hidePlayButton();this._model.isAutoplay()&&this._bindEvents();var a=this;this._model.getVideoInstance().on("ready",function(){b.getInstance().requestProcessVideoJsMarkup(a._view.getParentContainer())})},_bindEvents:function(){this._bindAutoplayPause();this._bindAutoplayFullscreen();this._bindOnClick();this._bindAutoplayStart()},_initVideoPlayer:function(){var c=this._model.getVideoURL(),g=/\.[0-9a-z]+$/i;"string"!==typeof c||g.test(c)||(c+=".mp4");var g=this._model.getParentID(),
a=this._model.getVideoID(),b=document.createElement("video");b.type="video/mp4";b.id=a;b.setAttribute("webkit-playsinline","webkit-playsinline");b.setAttribute("playsinline","playsinline");document.getElementById(g).appendChild(b);g=d(b);g.src(c);g.controls(!0);g.addClass("video-js");g.addClass("content-grid-video");g.addClass("vjs-big-play-button");g.addClass("vjs-big-play-centered");g.addClass("mako-cg-poster");g.poster(this._model.getPosterURL());return g},_bindAutoplayPause:function(){var c=this;
this._model.getVideoInstance().onpause=function(){c._view.isVideoInViewport()&&c._model.setCustomerClickedVideo(!0)}},_bindAutoplayStart:function(){var c=this._model.getVideoInstance(),b=e.$;c.muted(!0);this._playPauseVideoInViewport();e.on.scroll(b.proxy(this._playPauseVideoInViewport,this))},_bindAutoplayFullscreen:function(){var c=this;this._model.getVideoInstance().onfullscreenchange=function(){c._model.setCustomerClickedVideo(!0)}},_playPauseVideoInViewport:function(){var c=this._model.getVideoInstance();
this._model.getCustomerClickedVideo()||(this._view.isVideoInViewport()?c.paused()&&c.play():c.paused()||c.pause())},_bindOnClick:function(){var c=this;this._model.getVideoInstance().on("click",function(){c._model.setCustomerClickedVideo(!0)})},_hidePlayButton:function(){var c=this._model.getVideoInstance();c.addClass("hide-big-play-button");c.addClass("mako-cg-play-button")},destroy:function(){this._view=this._model=null}})});"use strict";f.when("A","MarsContentGridController","MarsContentGridModel",
"MarsContentGridView","ready").register("MarsContentGridFactory",function(e,d,b,c){var g=[];return{get:function(a){a=new d(new b(a),new c(a));g.push(a);return a},destroyAll:function(){g.forEach(function(a){a.destroy()});g=[]}}});"use strict";f.when("A","MakoCommonCartHelper","a-modal","ContentGridConstants","marsRefTagUtils").register("MarsContentGridInterstitial",function(e,d,b,c,g){var a=e.$,m,n=e.createClass({create:function(a,c,b,d){this.interstitialName=a;this.clientName=c;this.isMobile=d;this.header=
b;this.baseReftag="MarsContentGrid_"+a;this._bindEvents()},_bindEvents:function(){a("form#addToCart").find('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').bind("click",a.proxy(this._handleAtcEvent,this))},_handleAtcEvent:function(b){var g=this;b.preventDefault();b=a("form#addToCart");var e=b.find('input[type\x3d"hidden"][name\x3d"ASIN"]').val(),m=b.find('input[type\x3d"hidden"][name\x3d"offerListingID"]').val(),n=b.find('input[name\x3d"quantity"], select[name\x3d"quantity"]').val(),h=b.find('input[type\x3d"hidden"][name\x3d"session-id"]').val();
this.isMobile&&(e=b.find('input[type\x3d"hidden"][name\x3d"a"]').val(),m=b.find('input[type\x3d"hidden"][name\x3d"oid"]').val(),h=b.find('input[type\x3d"hidden"][name\x3d"verificationSessionID"]').val());b=d.createRequest(h,this.clientName);b.addAsinData(e,m,n).setReftag("MarsContentGrid__ATC");b.sendRequest().done(function(a){g._showInterstitial()}).fail(function(a){f.log("An error has occurred with common cart handler with: "+a+" for asin: "+e+", offerListingId: "+m+", quantity: "+n,c.FATAL_LOG_LEVEL,
c.ATTRIBUTION)})},_showInterstitial:function(){var c={dataStrategy:"preload",name:this.interstitialName,header:this.header},d="#"+this._getCamelCaseFromSnakeCase(this.interstitialName);if(this.isMobile)f.when("a-secondary-view").execute(function(b){var e=b.get(this.interstitialName);e||(e=b.create(a(d),c));e.show();g.send(this.baseReftag+"_InterstitialOpened")});else{var e=b.get(this.interstitialName);e||(e=b.create(a(d),c));e.show();g.send(this.baseReftag+"_InterstitialOpened")}},_getCamelCaseFromSnakeCase:function(a){return a.replace(/-([a-z])/g,
function(a){return a[1].toUpperCase()})}});return{getInstance:function(){m||(m=new n);return m}}});"use strict";f.when("A").register("MarsContentGridModel",function(e){return e.createClass({init:function(d){this._videoURL=d.URL;this._videoID=d.ID;this._autoplay="string"===typeof d.autoplay?"true"===d.autoplay:d.autoplay;this._hidePlayButton="string"===typeof d.hidePlayButton?"true"===d.hidePlayButton:d.hidePlayButton;this._customerClickedVideo=!1;this._posterURL=d.posterURL;this._parentID=d.parentID},
getVideoInstance:function(){return this._videoInstance},getSWFURL:function(){return SWF_URL},getVideoURL:function(){return this._videoURL},getVideoID:function(){return this._videoID},getHidePlayButton:function(){return this._hidePlayButton},getCustomerClickedVideo:function(){return this._customerClickedVideo},getPosterURL:function(){return this._posterURL},getParentID:function(){return this._parentID},isAutoplay:function(){return this._autoplay},setVideoInstance:function(d){this._videoInstance=d},
setCustomerClickedVideo:function(d){this._customerClickedVideo=d}})});"use strict";f.when("A").register("MarsContentGridView",function(e,d){var b=e.$;return e.createClass({init:function(b){this._parentContainer=document.getElementById(b.parentID)},getParentContainer:function(){return this._parentContainer},isVideoInViewport:function(){try{var c=this.getParentContainer();if(c&&c.getBoundingClientRect){var d=b(l),a=this.getParentContainer().getBoundingClientRect();return 0<a.bottom&&0<a.right&&a.top<
d.height()&&a.left<d.width()}}catch(e){}return!1}})});f.when("A","marsRefTagUtils").register("MarsContentGridModal",function(e,d){var b,c=e.createClass({create:function(b,a,c,n){var h=e.$,h=h("#"+a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})),l=h.parent(),k={name:a};n?e.capabilities.isAmazonApp&&(k.hideHeader=!0,f.when("a-secondary-view").execute(function(a){l.attr("data-a-secondary-view",JSON.stringify(k))})):f.when("a-modal").execute(function(a){k.header=c;k.width="750";l.attr("data-a-modal",
JSON.stringify(k))});h.one("click",function(){d.send("mars_content_grid_"+a+"_"+b)})}});return{getInstance:function(){b||(b=new c);return b}}});"use strict";f.when("A").register("MarsContentGridAccessibilityProcessor",function(e,d){var b=e.$,c,g=e.createClass({init:function(){this.hasPageLoaded="complete"===document.readyState||!1;this.doProcessMarkup=!1;this.videoJsContainers=[];this.hasPageLoaded||this._bindPageReadyEvents()},requestProcessMarkup:function(){this.hasPageLoaded?this._processLinksForAriaLabel():
this.doProcessMarkup=!0},requestProcessVideoJsMarkup:function(a){!a||!a instanceof b||!a instanceof HTMLElement||(a instanceof HTMLElement&&(a=b(a)),this.hasPageLoaded?this._processVideoJsMarkup(a):this.videoJsContainers.push(a))},_bindPageReadyEvents:function(){var a=this;f.when("ready").execute(function(){a.hasPageLoaded=!0;a.doProcessMarkup&&a._processLinksForAriaLabel();if(a.videoJsContainers.length){for(var b=0;b<a.videoJsContainers.length;b++)a._processVideoJsMarkup(a.videoJsContainers[b]);
a.videoJsContainers=[]}})},_processLinksForAriaLabel:function(){b(".content-grid-row-wrapper").find("a[title]").each(function(a,c){a=b(c);a.attr("aria-label")||a.attr("aria-label",a.attr("title"))})},_processVideoJsMarkup:function(a){b(a).find("button.vjs-menu-button[title]").each(function(a,c){c=b(c);a=c.attr("title");c.attr("aria-label")||c.attr("aria-label",a);c=c.parent().find(".vjs-menu-content");c.attr("aria-label")||c.attr("aria-label",a)})}});return{getInstance:function(){c||(c=new g);return c}}});
"use strict";f.declare("ContentGridConstants",{ATTRIBUTION:"MarsContentGridAssets",FATAL_LOG_LEVEL:"FATAL"});"use strict";f.when("A").register("marsRefTagUtils",function(e){var d=e.$;return{send:function(b,c){if(!b)throw Error("refTag is not defined");d.post((c||"/gp/digital/fiona/ajax/log.html")+"/ref\x3d"+b)}}});"use strict";f.execute("mako-vse-light-player.js",function(){function e(d,b,c){c===k&&(c=b,b=d,d=[]);f.now(b).execute("Registrant",function(e){e===k&&f.when.apply(f,d).register(b,c)})}e(["A",
"Mako.VSEHelper","VSEPlayerIntegrationWithMako"],"Mako.IVSELightPlayer",function(d,b,c){var e=["videoUrl"];return{render:function(a,f){if("undefined"===typeof f)throw"Argument required: playerParentId";for(var h=0;h<e.length;h++){var k=e[h];if(!d.$.trim(a[k]))throw"Argument required: options."+k;}a={video:{videoURL:a.videoUrl,imageURL:a.imageUrl},locale:a.locale||b.getLocale(),marketplaceID:a.marketplaceID||b.getMarketplaceId(),page:a.pageType||b.getPageType(),placement:a.placement||"placement_"+
f,requester:"Mako",clientPrefix:"mako"+f};c.render(a,f,b.getVideoComponentEndpointHost())}}});e(["A"],"VSEPlayerIntegrationWithMako",function(d){return{render:function(b,c,e){d.ajax(e+"/vap/ew/subcomponent/vseplayer",{params:b,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",withCredential:!0,timeout:4E3,success:function(a){var b=d.$("#"+c);if(1===b.length)b.html(a);else throw["Did not find the appropriate number of video parent elements.","Expecting 1; found: "+b.length,
"Possible reasons: - conflicting players with non-unique ids\n - id name is not formatted correctly\n - parent element was removed or is not available (possibly race condition)"].join("\n");},error:function(a){throw"Error calling VSE player endpoint. "+("string"===typeof a)?a:"";}})}}});e(["A"],"Mako.VSEHelper",function(d){var b=l.opt||{};return{getMarketplaceId:function(){return b.obfuscatedMarketId||"ATVPDKIKX0DER"},getLocale:function(){return b.language||"en_US"},getPageType:function(){return b.pageType||
"Unknown"},getVideoComponentEndpointHost:function(){var b=l.location.host,d="https://www.amazon.com";0<=b.indexOf(".amazon.")&&(d="https://"+b);return d}}})});h([],"MarsModuleRegistration",function(){return{safeRegister:h}})});