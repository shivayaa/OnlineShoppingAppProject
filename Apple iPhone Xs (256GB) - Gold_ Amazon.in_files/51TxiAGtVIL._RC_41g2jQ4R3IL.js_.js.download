(function(q){var r=window.AmazonUIPageJS||window.P,n=r._namespace||r.attributeErrors,h=n?n("BuyBackAssets",""):r;h.guardFatal?h.guardFatal(q)(h,window):h.execute(function(){q(h,window)})})(function(q,r,n){q.when("A","BBPageState","bbMetric").register("buyback-util",function(h,l,g){function b(a){var d=a%10;10<=a&&(d+=b(Math.floor(a/10)));return d}var f=h.$;l.init();var d=l.getUpdatedState();return{hide:function(){for(var a=0;a<arguments.length;a++)f("#"+arguments[a]).removeClass("show").addClass("hide")},
show:function(){for(var a=0;a<arguments.length;a++)f("#"+arguments[a]).removeClass("hide").addClass("show")},hideInline:function(){for(var a=0;a<arguments.length;a++)null!==f("#"+arguments[a])&&f("#"+arguments[a]).addClass("hide")},showInline:function(){for(var a=0;a<arguments.length;a++)null!==f("#"+arguments[a])&&f("#"+arguments[a]).removeClass("hide")},isValidBuyBackIMEI:function(){var a=f("#buyBackIMEITextInput").val(),d=0,c;if(15!==a.length||-1!==a.indexOf("."))return!1;a=Number(f("#buyBackIMEITextInput").val());
if(isNaN(a))return!1;for(var g=15;1<=g;g--)c=a%10,0===g%2&&(c*=2),d+=b(c),a=Math.floor(a/10);return 0===d%10?!0:!1},getFormattedPrice:function(a,b){"undefined"===typeof b&&(b=!1);a=a.toFixed(2);var c=Math.floor(a),d="";b?0<a.indexOf(".")&&c!==a&&(d=a.substring(a.indexOf("."),a.length)):0<a.indexOf(".")&&(d=a.substring(a.indexOf("."),a.length));c=c.toString();a=c.substring(c.length-3);c=c.substring(0,c.length-3);""!==c&&(a=","+a);return c.replace(/\B(?=(\d{2})+(?!\d))/g,",")+a+d},applyBuyBackOffer:function(a){var b=
!1,c={type:"post",url:"/gp/product/features/buyback/buyBackDiscountHandler.html?"+f.param({asin:a.asin,category:a.buyBackCategory,currencyCode:a.currencyCode,postalCode:a.postalCode,sellerId:a.sellerId,categoryIdentifier:a.categoryIdentifier,productPrice:a.buyBoxOfferBuyingPrice,buyBackOfferId:a.selectedBuyBackOfferData.offerId,isGepEligible:a.selectedBuyBackOfferData.gepEligibleBrandModel?1:0,discountValue:a.selectedBuyBackOfferData.discountPrice||(a.selectedBuyBackOfferData.gepEligibleBrandModel?
1:0),feeAsin:a.feeAsin,convenienceFee:a.convenienceFee}),async:!1,success:function(c){var k;try{k=JSON.parse(c)}catch(d){b=!1}"undefined"!==typeof k&&"SUCCESS"===k.status&&(b=!0,a.totalSponsoredValue=k.sponsoredDiscount,a.purchaseHistoryDiscount=k.purchaseHistoryDiscount,a.shouldDisplaySponsorMessage=k.shouldDisplaySponsorMessage,h.state("AdditionalSweetener",{sweetener:k.valueMatchingSweetener}))},error:function(){b=!1}};f.ajax(c);h.trigger("BUYBACK_DISCOUNT_HANDLER_FOR_DFL",b);return b},updateBestBuyBackOfferForCategory:function(a){var b=
!1,c={type:"post",url:"/gp/product/features/buyback/buyBackOffersForCategory.html?"+f.param({encryptedMarketPlaceId:a.encryptedMarketPlaceId,asin:a.asin,productPrice:a.productPrice,brand:a.brand,subCategoryName:a.subCategoryName,encryptedMerchantId:a.sellerId,postalCode:a.postalCode,buyBackCategory:a.categoryChosen,rbnHierarchyNodes:a.productCategory}),async:!1,success:function(c){var k;try{k=JSON.parse(c)}catch(d){b=!1}"undefined"!==typeof k&&"SERVICE-SUCCESS"===k.status&&(b=!0,a.buyBackExchangeItems=
"",""!==k.BestBuyBackOffer&&null!==k.BestBuyBackOffer&&(c=JSON.parse(k.BestBuyBackOffer),a.buyBackExchangeItems=c.containedBuyBackProductNodes),a.buyBackCategory=k.BuyBackCategory,a.buyBackprompt1Text=k.Option1PromptText,a.buyBackprompt2Text=k.Option2PromptText,a.buyBackprompt3Text=k.Option3PromptText)},error:function(){b=!1}};f.ajax(c);return b},validateBrandAndModelBasedOnIMEI:function(a){var b={asin:a.asin,imeiNumber:a.imeiNumber,brand:a.selectedBuyBackOptions[0],model:a.selectedBuyBackOptions[1],
category:a.buyBackCategory.toLowerCase(),sellerId:a.sellerId,isGepEligible:a.selectedBuyBackOfferData.gepEligibleBrandModel?1:0,totalBuyBackDiscount:a.selectedBuyBackOfferData.discountPrice+a.totalSponsoredValue,productPrice:a.productPrice},c="FAILED",b={type:"post",url:"/gp/product/features/buyback/verifyIMEIHandler.html?"+f.param(b),async:!1,success:function(b){var k;try{k=JSON.parse(b)}catch(d){c="FAILED"}"undefined"!==typeof k&&"SUCCESS"===k.status?(c="SUCCESS",a.gepDiscountValue=k.gepDiscountValue,
a.discountAppliedText=k.discountAppliedText,a.gepSuccessNoteText=k.gepSuccessNoteText,a.gepFailureNoteText=k.gepFailureNoteText,a.gepStatusCode=k.gepStatusCode):"undefined"!==typeof k&&"MISMATCH"===k.status?c="MISMATCH":"undefined"!==typeof k&&"BLOCK"===k.status&&(c="BLOCK")},error:function(){c="FAILED"}};f.ajax(b);h.trigger("VALIDATE_IMEI_FOR_DFL",c,a);return c},setSelectedBuyBackOffer:function(a){var b=!0;f.each(a.buyBackExchangeItems,function(c,d){if(1<a.noOfQuestions&&d.header===a.selectedBuyBackOptions[0])f.each(d.containedBuyBackProductNodes,
function(c,d){if(d.header===a.selectedBuyBackOptions[1]){if(""===a.selectedBuyBackOptions[2]&&null!==d.buyBackProductDetails)return a.selectedBuyBackOfferData=d.buyBackProductDetails.buyBackOfferDetailsList[0],b=!1;f.each(d.containedBuyBackProductNodes,function(c,k){if(k.header===a.selectedBuyBackOptions[2]&&null!==k.buyBackProductDetails)return a.selectedBuyBackOfferData=k.buyBackProductDetails.buyBackOfferDetailsList[0],b=!1})}});else if(1===a.noOfQuestions&&d.header===a.selectedBuyBackOptions[0]){if(null!==
d.buyBackProductDetails)return a.selectedBuyBackOfferData=d.buyBackProductDetails.buyBackOfferDetailsList[0],b=!1;f.each(d.containedBuyBackProductNodes,function(c,d){if(d.header===a.selectedBuyBackOptions[2]&&null!==d.buyBackProductDetails)return a.selectedBuyBackOfferData=d.buyBackProductDetails.buyBackOfferDetailsList[0],b=!1})}return b});return b},auiNewPageStateParseLogicBuyBack:function(){var a=h.parseJSON,b=["buyBackPageState"];h.each(f('script[type\x3d"a-state"]'),function(c){c=f(c);if(!c.data("a-eval")){var d=
c.attr("data-a-state");if(d&&(d=a(d),d.key&&-1!==f.inArray(d.key,b))){var k=a(c.html());h.state.replace(d.key,k);c.data("a-eval",!0)}}})},getSponsoredDiscount:function(a,b,c,d,k){var g=0;a={type:"post",url:"/gp/product/features/buyback/buyBackAjaxHandler.html?"+f.param({asin:a.asin,category:a.buyBackCategory,currencyCode:a.currencyCode,postalCode:a.buyBackPostalCode,sellerId:a.sellerId,categoryIdentifier:a.categoryIdentifier,productPrice:a.buyBoxOfferBuyingPrice,buyBackOfferId:b,discountValue:c,imeiNumber:d,
brand:a.deviceBrandName,modelId:a.deviceModelId,feeAsin:a.feeAsin,convenienceFee:a.convenienceFee}),async:!1,success:function(a){var c;try{c=JSON.parse(a)}catch(b){g=0}"undefined"!==typeof c&&"SUCCESS"===c.status&&(g=c.sponsoredDiscount,k.shouldDisplaySponsorMessage=c.shouldDisplaySponsorMessage)},error:function(){g=0}};f.ajax(a);return g},getMaxDiagnosticsDiscount:function(a,b){a="/gp/product/features/buyback/buyBackDiagnosticOffer.html?"+f.param({sessionId:a.dpSessionId,asin:a.asin,diagnosticRunId:b,
productPrice:a.buyBoxOfferBuyingPrice});var c=0;if(!b||0===b.length)return c;f.ajax({type:"post",url:a,async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(d){c=0}"undefined"!==typeof b&&"SERVICE-SUCCESS"===b.status&&(c=b)},error:function(){c=0}});return c},getModelNameFromModelId:function(a,b){var c="";a={type:"post",url:"/gp/product/features/buyback/diagnosticMobileModelName.html?"+f.param({mobileModelId:b+"_"+a}),async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(d){c=""}"undefined"!==
typeof b&&"SERVICE-SUCCESS"===b.status&&(c=b)},error:function(){c=""}};f.ajax(a);return c},updateCustomerdata:function(a,b,c,d){var k=!1;a={type:"post",url:"/gp/product/features/buyback/updateBuyBackCustomerDataBySession.html?"+f.param({sessionId:a.dpSessionId,asin:a.asin,buyBackData:b,sponsoredOffers:c,diagnosticOffer:d}),async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(c){k=!1}"undefined"!==typeof b&&"SERVICE-SUCCESS"===b.status&&(k=!0)},error:function(){k=!1}};f.ajax(a);return k},fetchDeviceCheckRejectWeblabTreatment:function(){var a=
"C";f.ajax({type:"get",url:"/gp/product/features/buyback/buyBackDeviceCheckWeblabTrigger.html",async:!1,success:function(b){var c;try{c=JSON.parse(b)}catch(d){g.increment("BuyBack:buyBackDeviceCheckWeblabTrigger:jsonParse:count")}"undefined"!==typeof c&&"SUCCESS"===c.status&&(a=c.deviceCheckRejectWeblab,g.increment("BuyBack:deviceCheckRejectWeblab:success:count"))},error:function(){g.increment("BuyBack:deviceCheckRejectWeblab:error:count")}});return a},checkBuyBackAccordionRequest:function(a){return"undefined"===
typeof a||"BB"===a?!0:!1},checkValidDeviceCheckRequest:function(a,b){return"DFL"===a||this.checkBuyBackAccordionRequest(a)&&b?!0:!1},checkDeviceCheckScreenAvailability:function(a,b){return"T1"!==a||"mobile"!==b&&"Mobile"!==b?!1:!0},setBuyBackDeviceCheckScreenImages:function(){var a=["https://m.media-amazon.com/images/G/31/buyback/device_check_screen/1.jpg","https://m.media-amazon.com/images/G/31/buyback/device_check_screen/2.jpg","https://m.media-amazon.com/images/G/31/buyback/device_check_screen/3.jpg",
"https://m.media-amazon.com/images/G/31/buyback/device_check_screen/4.jpg"];if(null!==f(".device-check-image-container"))for(var b=f(".device-check-image-container").length,c=a.length,d=0;d<b;d++){var k=a[d%c],g=f(".device-check-image-container")[d].childNodes[1];null!==g&&null!==g.childNodes[1]&&g.childNodes[1].setAttribute("src",k)}},setBuyBackExchangeTip:function(a,b){if(this.checkValidDeviceCheckRequest(a,b)){a=localStorage.getItem("deviceCheckRejectWeblabTreatment");b=f("#buybackMobileExchangeTipT1Treatment");
var c=f("#buybackMobileExchangeTipT2Treatment"),g=f("#buybackMobileExchangeTip");b&&c&&g&&("T1"===d.deviceCheckWeblabAllocation&&"T1"===a?(this.hide("buybackMobileExchangeTipT1Treatment","buybackMobileExchangeTipT2Treatment","buybackMobileExchangeTip"),this.show("buybackMobileExchangeTipT1Treatment"),this.setBuyBackDeviceCheckScreenImages()):"T1"===d.deviceCheckWeblabAllocation&&"T2"===a?(this.hide("buybackMobileExchangeTipT1Treatment","buybackMobileExchangeTipT2Treatment","buybackMobileExchangeTip"),
this.show("buybackMobileExchangeTipT2Treatment"),this.setBuyBackDeviceCheckScreenImages()):"T1"===d.deviceCheckWeblabAllocation&&(this.hide("buybackMobileExchangeTipT1Treatment","buybackMobileExchangeTipT2Treatment","buybackMobileExchangeTip"),this.show("buybackMobileExchangeTip")))}}}});"use strict";q.when("A","BBPageState","bbMetric").register("BuyBackFeeHandler",function(h,l,g){var b=h.$,f=null,d=!1,a=[];(l=l.getUpdatedState())&&l.feeMap&&l.feeMap.map&&"object"===typeof l.feeMap.map&&"{}"!==JSON.stringify(l.feeMap.map)&&
(f=l.feeMap.map);return{fetchFeeMap:function(l,c){if(f){if(c)try{c(f)}catch(n){g.increment("BuybackFeeHandler:Callback:Exception")}}else a.push(c),d||(d=!0,l="/gp/product/features/buyback/buyBackConvenienceFeeHandler.html?"+b.param({chargeKeyPrefix:l}),h.ajax(l,{method:"get",success:function(b){b&&(f=b.feeMap,h.each(a,function(a,b){if(a)try{a(f)}catch(c){g.increment("BuybackFeeHandler:Callback:Exception")}}),a=[]);d=!1;g.increment("BuybackFeeHandler:FetchFeeAjaxCall:Success")},error:function(){g.increment("BuybackFeeHandler:FetchFeeAjaxCall:Failure");
d=!1;a=[]}}))}}});"use strict";q.when("A","a-button","a-dropdown","buyback-util","BBPageState","bbMetric","gep-util","BBPageStateHelper","BuyBackFeeHandler","buyBackPageStateStatic").execute(function(h,l,g,b,f,d,a,p,c){function G(a){var b={inlineContent:e.selectOldProductDetailsToolTipText,position:"triggerBottom"};q.when("A","jQuery").execute(function(c,d){c.declarative.create(d("#"+a),"a-tooltip",b)})}function k(a){q.when("A","jQuery").execute(function(b,c){b.declarative.remove(c("#"+a),"a-tooltip")})}
function u(a){""!==a&&null!==g.getSelect(m('[id\x3d"'+a+'"]'))&&g.getSelect(m('[id\x3d"'+a+'"]')).setValue("")}function v(){var a=f.getUpdatedState();m.isEmptyObject(a)||(e.selectOldProductDetailsToolTipText=a.selectOldProductDetailsToolTipText,e.productCategory=a.buyBackCategory,e.buyBackCategory=a.buyBackCategory,e.enableRefactoring=a.enableRefactoring,e.buyBackprompt1Text=a.buyBackDropDown1prompt,e.buyBackprompt2Text=a.buyBackDropDown2prompt,e.buyBackprompt3Text=a.buyBackDropDown3prompt,e.categoryIdentifier=
a.categoryIdentifier,e.buyBackExchangeItems=a.buyBackExchangeItems,e.currencyCode=a.currencyCode,e.buyBackMobile=a.buyBackMobile,e.buyBoxOfferBuyingPrice=Number(a.buyBoxOfferBuyingPrice),e.feeAsin="",e.feeMap=a.feeMap,a.feeAsin!==n&&(e.feeAsin=a.feeAsin),a.convenienceFee!==n?e.convenienceFee=Number(a.convenienceFee):(e.convenienceFee=0,c.fetchFeeMap(e.productCategory,function(a){e.feeMap={map:a};A();e.convenienceFee||d.increment("BuyBack:mobile:noConvenienceFeeConfigured:count")})),e.asin=a.asin,
a.sellerId!==n&&(e.sellerId=a.sellerId),e.brand=a.brand,e.subCategoryName=a.subCategoryName,e.postalCode=a.buyBackPostalCode,e.encryptedMarketPlaceId=a.marketPlaceId,e.productPrice=a.productPrice,e.crossCategoryOfferAvailable=a.crossCategoryOfferAvailable,e.noOfQuestions=a.noOfQuestions,e.audioWeblabTreatment=a.audioWeblabTreatment,e.gepEligible=a.gepEligibleCustomer)}function z(){l("#buyBackBuyNowButton").enable();k("buyBackBuyNowToolTip")}function t(){l("#buyBackBuyNowButton").disable();G("buyBackBuyNowToolTip")}
function B(){var a=e.buyBoxOfferBuyingPrice-(e.selectedBuyBackOfferData.discountPrice+e.totalSponsoredValue+e.purchaseHistoryDiscount);if(""===e.convenienceFee)C();else{var c=Number(e.convenienceFee),a=a+c;m("#isBuyBackFee")[0]===n?r():D();m("#convenienceFeeCharge").text(c)}a=b.getFormattedPrice(a);m("#priceAfterBuyBackDiscount").text(a)}function r(){m("#buyBackBuyNow").append('\x3cinput type\x3d"hidden" id\x3d"isBuyBackKey" name\x3d"custom-name.2.1" value\x3d"UNIQ-buyBack"\x3e\x3cinput type\x3d"hidden" id\x3d"isBuyBackFee" name\x3d"custom-value.2.1" value\x3d"BuyBackFee"\x3e')}
function A(){if(e.categoryChosen===n||""===e.categoryChosen)e.categoryChosen=e.productCategory;var a=e.productCategory.toLowerCase()+"_"+e.categoryChosen.toLowerCase();e.convenienceFee="";e.feeAsin="";if(e.feeMap===n){var b="BuyBack:web:noEntryExistsFor"+e.productCategory.toLowerCase()+":count";d.increment(b)}else e.feeMap.map[a]===n?d.increment("BuyBack:web:noEntryExistsFor"+a+":count"):e.feeMap.map[a].feeEnabled?(b=e.feeMap.map[a].asin,e.convenienceFee=e.feeMap.map[a].price,e.feeAsin=b,a=e.feeMap.map[a].offeringId,
m("#feeAsin").val(b),m("#feeOfferingId").val(a)):d.increment("BuyBack:web:feeDisabledFor"+a+":count")}function D(){m("#isBuyBackKey").val("UNIQ-buyBack");m("#isBuyBackFee").val("BuyBackFee")}function C(){m("#feeAsin")[0]!==n&&m("#feeAsin")[0].value!==n&&m("#feeAsin").val("");m("#feeOfferingId")[0]!==n&&m("#feeOfferingId")[0].value!==n&&m("#feeOfferingId").val("");m("#isBuyBackKey")[0]!==n&&m("#isBuyBackKey")[0].value!==n&&m("#isBuyBackKey").val("");m("#isBuyBackFee")[0]!==n&&m("#isBuyBackFee")[0].value!==
n&&m("#isBuyBackFee").val("")}function w(c){d.increment("BuyBack:web:discountApply:count");t();var k=e.selectedBuyBackOfferData.gepEligibleBrandModel;d.startTimer("BuyBack:web:ajaxSave");var g=b.applyBuyBackOffer(e);d.stopTimer("BuyBack:web:ajaxSave");if(g){c=e.selectedBuyBackOfferData.discountPrice+e.totalSponsoredValue+e.purchaseHistoryDiscount;var g=e.shouldDisplaySponsorMessage,f=h.state("AdditionalSweetener");f||(h.state.parse(),f=h.state("AdditionalSweetener"));var l=0;m.isEmptyObject(f)||(l=
f.sweetener);f=e.totalSponsoredValue-l;m("#buyBackDiscountPrice").text(b.getFormattedPrice(c));m("#buyBackSponsoredDiscount").text(b.getFormattedPrice(f));0<f&&"1"===g?b.show("buyBackSponsoredDiscountText"):b.hide("buyBackSponsoredDiscountText");""!==e.convenienceFee&&b.show("buyBackConvenienceFeeTextSection");b.show("buyBackOfferAppliedSuccess","buyBackOfferAppliedSuccessText","priceAfterBuyBackDiscountSection","buyBackDetailsVerifyText","buyBackTermsAndConditions");b.hide("buyBackCollectOldProductDetailsText",
"maxBuyBackDiscountSection","buyBackServiceFailedAlert");B();e.buyBackCategory.toLowerCase()!==e.buyBackMobile.toLowerCase()?z():(k?(b.show("buyBackIMEISection"),a.showGEPInfoDiv(e)):b.show("buyBackIMEISection","buyBackVerifyIMEIText"),b.hide("buyBackTermsAndConditions","buyBackIMEIUpdate"));d.increment("BuyBack:web:dataSaveSuccess:count")}else k?a.showGEPDivsWhenRegularExchangeNotPresent():(d.increment("BuyBack:web:dataSaveFailed:count"),b.show("buyBackServiceFailedAlert","buyBackCollectOldProductDetailsText",
"maxBuyBackDiscountSection"),b.hide("buyBackDetailsVerifyText","buyBackOfferAppliedSuccess","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackIMEISection","buyBackConvenienceFeeTextSection"),u(c))}function E(){h.on("a:dropdown:select",function(a){"buyBackDropDown0"===a.name?y():"buyBackDropDown1"===a.name?(d.increment("BuyBack:web:dropDown1Select:count"),b.hide("buyBackSelectDropDown2Alert","buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackExchangeMightBeEligibleText",
"buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert","buybackImeiBlockAlert","buyBackConvenienceFeeTextSection"),m(".buyBackGEPCustomer").removeClass("show").addClass("hide"),e.selectedBuyBackOptions[0]=m("#buyBackDropDown1").val(),b.show("buyBackDropDowns2"),m('[id\x3d"'+e.previousSelectedBuyBackOptions[0]+'Id"]').removeClass("show").addClass("hide"),m('[id\x3d"'+e.selectedBuyBackOptions[0]+'Id"]').removeClass("hide").addClass("show"),
"tv"===e.buyBackCategory.toLowerCase()&&b.show("buyBackItemWorkingConditionText"),b.show("buyBackCollectOldProductDetailsText","maxBuyBackDiscountSection"),e.categoryChosen.toLowerCase()===e.buyBackMobile?b.hide("buyBackDropDown3"):b.show("buyBackDropDown3"),u(e.previousSelectedBuyBackOptions[0]),""!==e.previousSelectedBuyBackOptions[1]&&(a=e.previousSelectedBuyBackOptions[0]+e.previousSelectedBuyBackOptions[1],m('[id\x3d"'+a+'Id"]').removeClass("show").addClass("hide"),u(a)),e.previousSelectedBuyBackOptions[0]=
e.selectedBuyBackOptions[0],1!==e.noOfQuestions||b.setSelectedBuyBackOffer(e)?t():w(e.selectedBuyBackOptions[0])):a.name===m("#buyBackDropDown1").val()?(d.increment("BuyBack:web:dropDown2Select:count"),e.selectedBuyBackOptions[1]=m('[id\x3d"'+e.selectedBuyBackOptions[0]+'"]').val(),b.hide("buyBackExchangeMightBeEligibleText"),m(".buyBackGEPCustomer").removeClass("show").addClass("hide"),"T1"!==e.audioWeblabTreatment||2!==e.noOfQuestions||b.setSelectedBuyBackOffer(e)?(t(),e.buyBackCategory.toLowerCase()===
e.buyBackMobile.toLowerCase()?(b.hide("buyBackDropDown3","buyBackIMEIMismatchAlert","buyBackValidIMEIAlert","buyBackIMEIUpdateText","buyBackCollectOldProductDetailsText","buybackImeiBlockAlert"),b.show("buyBackHowToGetIMEI","buyBackIMEISection","buyBackDetailsVerifyText"),m("#buyBackIMEITextInput").removeClass("a-form-error"),m("#buyBackIMEITextInput").val(""),b.setSelectedBuyBackOffer(e)||w(e.selectedBuyBackOptions[0])):(b.hide("buyBackOfferAppliedSuccess","buyBackDetailsVerifyText","buyBackTermsAndConditions",
"priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackValidIMEIAlert","buyBackIMEIMismatchAlert","buyBackIMEIUpdateText","buyBackDropDown3","buybackImeiBlockAlert","buyBackConvenienceFeeTextSection"),b.show("buyBackCollectOldProductDetailsText","maxBuyBackDiscountSection","buyBackDropDowns3"),""!==e.previousSelectedBuyBackOptions[1]&&(a=e.previousSelectedBuyBackOptions[0]+e.previousSelectedBuyBackOptions[1],m('[id\x3d"'+a+'Id"]').removeClass("show").addClass("hide"),u(a)),m('[id\x3d"'+
e.selectedBuyBackOptions[0]+e.selectedBuyBackOptions[1]+'Id"]').removeClass("hide").addClass("show"),e.previousSelectedBuyBackOptions[1]=e.selectedBuyBackOptions[1])):w(e.selectedBuyBackOptions[0])):a.name===e.selectedBuyBackOptions[0]+e.selectedBuyBackOptions[1]&&(d.increment("BuyBack:web:dropDown3Select:count"),b.hide("buyBackExchangeMightBeEligibleText"),m(".buyBackGEPCustomer").removeClass("show").addClass("hide"),e.selectedBuyBackOptions[2]=m('[id\x3d"'+e.selectedBuyBackOptions[0]+e.selectedBuyBackOptions[1]+
'"]').val(),b.setSelectedBuyBackOffer(e)||w(e.selectedBuyBackOptions[0]+e.selectedBuyBackOptions[1]))});m("#buyBackIMEITextInput").bind("change input",function(){d.increment("BuyBack:web:imeiInput:count");b.hide("buyBackValidIMEIAlert","buyBackIMEIUpdate","buyBackServiceFailedAlert","buyBackTermsAndConditions","buyBackIMEIMismatchAlert","buybackImeiBlockAlert","buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes");b.show("buyBackHowToGetIMEI","buyBackVerifyIMEIText","buyBackOfferAppliedSuccess");
m("#buyBackIMEITextInput").removeClass("a-form-error");a.showGEPInfoDiv(e);t()});m("#buyBackApplyButton").unbind("click").click(function(){d.increment("BuyBack:web:apply:count");e.imeiNumber=m("#buyBackIMEITextInput").val();if(b.isValidBuyBackIMEI()){e.gepEligible=a.gepEligibleCustomer?1:0;var c=b.validateBrandAndModelBasedOnIMEI(e);if("FAILED"===c)d.increment("BuyBack:web:imeiServiceFailed:count"),t(),b.show("buyBackServiceFailedAlert","buyBackVerifyIMEIText"),b.hide("buyBackTermsAndConditions",
"buyBackIMEIMismatchAlert","buyBackValidIMEIAlert","buyBackIMEIUpdate","buybackImeiBlockAlert","buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes"),a.showGEPInfoDiv(e);else if("MISMATCH"===c)d.increment("BuyBack:web:imeiMismatch:count"),t(),m("#buyBackIMEITextInput").addClass("a-form-error"),b.show("buyBackIMEIMismatchAlert","buyBackVerifyIMEIText"),b.hide("buyBackTermsAndConditions","buyBackServiceFailedAlert","buyBackValidIMEIAlert","buyBackIMEIUpdate","buybackImeiBlockAlert","buyBackGEPIMEISuccessAlert",
"buyBackGEPSuccessNotes"),a.showGEPInfoDiv(e);else if("BLOCK"===c)d.increment("BuyBack:web:imeiBlock:count"),t(),m("#buyBackIMEITextInput").addClass("a-form-error"),b.show("buybackImeiBlockAlert","buyBackVerifyIMEIText"),b.hide("buyBackTermsAndConditions","buyBackServiceFailedAlert","buyBackValidIMEIAlert","buyBackIMEIUpdate","buyBackIMEIMismatchAlert","buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes"),a.showGEPInfoDiv(e);else if("SUCCESS"===c)if(d.increment("BuyBack:web:correctIMEI:count"),b.hide("buyBackHowToGetIMEI",
"buyBackVerifyIMEIText","buyBackGEPIMEIInfoAlert","buyBackIMEIMismatchAlert","buyBackValidIMEIAlert","buyBackServiceFailedAlert","buybackImeiBlockAlert"),z(),e.selectedBuyBackOfferData.gepEligibleBrandModel)if(a.showGEPDivPostIMEIValidation(e),e.gepDiscountValue){c=e.buyBoxOfferBuyingPrice-e.gepDiscountValue;if(""===e.convenienceFee)C();else{var k=Number(e.convenienceFee),c=c+k;m("#isBuyBackFee")[0]===n?r():D();m("#convenienceFeeCharge").text(k)}c=b.getFormattedPrice(c);m("#priceAfterBuyBackDiscount").text(c);
b.hide("maxBuyBackDiscountSection");b.show("priceAfterBuyBackDiscountSection")}else B();else 11===e.gepStatusCode?(d.increment("BuyBack:GEP:gepNotEligibleDueToCustomerNotLoggedIn:count"),m("#buyBackGEPNotEligibleAlert").html(e.gepFailureNoteText),b.hide("buyBackGEPIMEISuccessAlert"),b.show("buyBackGEPNotEligibleAlert","buyBackOfferAppliedSuccess","buyBackTermsAndConditions")):(b.hide("buyBackGEPNotEligibleAlert","buyBackOfferAppliedSuccess"),b.show("buyBackIMEIUpdate","buyBackTermsAndConditions"))}else m("#buyBackIMEITextInput").addClass("a-form-error"),
b.hide("buyBackGEPNotEligibleAlert","buyBackOfferAppliedSuccess","buyBackIMEIUpdate","buyBackTermsAndConditions","buyBackServiceFailedAlert","buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes"),b.show("buyBackValidIMEIAlert","buyBackHowToGetIMEI","buyBackVerifyIMEIText"),a.showGEPInfoDiv(e),t()})}function F(a,b,c,d,e){if("undefined"===typeof b)return"";var k="\x3cspan class\x3d'a-dropdown-container'\x3e\x3cselect name\x3d'"+d+c+"' id\x3d'"+d+c+"' tabindex\x3d'-1' class\x3d'a-native-dropdown a-button-span12 a-spacing-none'\x3e\x3coption class\x3d'a-prompt' value\x3d''\x3e"+
e+"\x3c/option\x3e";m.each(b,function(a,b){k=k+"\x3coption value\x3d'"+b.header+"'\x3e"+b.header+"\x3c/option\x3e"});return k=k+"\x3c/select\x3e\x3cspan tabindex\x3d'-1' id\x3d'"+d+c+"Id' class\x3d'a-button a-button-dropdown a-spacing-none a-button-span12 hide' \x3e\x3cspan class\x3d'a-button-inner'\x3e\x3cspan class\x3d'a-button-text a-declarative' data-action\x3d'a-dropdown-button' role\x3d'button' tabindex\x3d'0'\x3e\x3cspan class\x3d'a-dropdown-prompt'\x3e"+e+"\x3c/span\x3e\x3c/span\x3e\x3ci class\x3d'a-icon a-icon-dropdown'\x3e\x3c/i\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e"}
function x(){if("undefined"!==typeof e.buyBackExchangeItems){var a="",b="";m.each(e.buyBackExchangeItems,function(c,d){a+=F(c,d.containedBuyBackProductNodes,d.header,"",e.buyBackprompt2Text);var k=d.header;m.each(d.containedBuyBackProductNodes,function(a,c){b+=F(a,c.containedBuyBackProductNodes,c.header,k,e.buyBackprompt3Text)})});m("#buyBackDropDowns2").html(a);m("#buyBackDropDowns3").html(b)}}function H(){if("undefined"!==typeof e.buyBackExchangeItems&&""!==e.buyBackExchangeItems){g.getSelect("buyBackDropDown1").getOptions().remove();
g.getSelect("buyBackDropDown1").addOptions(I(e.buyBackExchangeItems));var a=e.buyBackprompt1Text;g.getSelect("buyBackDropDown1").update({option_prompt:a});q.when("A").execute(function(a){a.$("#buyBackDropDown1Id").show()});b.show("buyBackDropDown1Id","buyBackDropDowns1");1<e.noOfQuestions&&x()}}function I(a){var b=[];h.each(a,function(a){b.push({text:a.header,value:a.header})});return b}function y(){h.on("a:dropdown:select",function(a){"buyBackDropDown0"===a.name&&(d.increment("BuyBack:web:dropDown0Select:count"),
d.startTimer("BuyBack:web:getBuyBackCrossCategoryOffers"),b.hide("buyBackSelectDropDown2Alert","buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert","buyBackDropDown3","buyBackValidIMEIAlert","buyBackIMEIUpdate","buyBackMobileWorkingConditionText","mobileExchangeNotAvailableAtPincode","buyBackItemWorkingConditionText","buybackImeiBlockAlert",
"buyBackConvenienceFeeTextSection"),b.show("buyBackCollectOldProductDetailsText","maxBuyBackDiscountSection"),e.categoryChosen=m("#buyBackDropDown0").val(),A(),e.selectedBuyBackOptions=["","",""],e.previousSelectedBuyBackOptions=["",""],a=b.updateBestBuyBackOfferForCategory(e),""===e.buyBackExchangeItems||!1===a?(d.increment("BuyBack:web:crossCategoryOfferNotAvailableStringShown:count"),d.startTimer("BuyBack:web:crossCategoryOfferNotAvailable"),e.buyBackExchangeItems="",b.hide("buyBackDropDowns1",
"buyBackDropDowns2","buyBackDropDowns3","buyBackSelectDropDown2Alert","buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert","buyBackDropDown1Id","buyBackCollectOldProductDetailsText","buybackImeiBlockAlert","buyBackConvenienceFeeTextSection"),b.hide("buyBackCollectOldProductDetailsText"),b.show("mobileExchangeNotAvailableAtPincode"),t(),d.stopTimer("BuyBack:web:crossCategoryOfferNotAvailable")):
(e.categoryChosen.toLowerCase()===e.buyBackMobile&&(b.hide("buyBackDropDown3"),b.show("buyBackMobileWorkingConditionText")),"tv"===e.categoryChosen.toLowerCase()&&b.show("buyBackItemWorkingConditionText"),g.getSelect("buyBackDropDown1").update({option_prompt:e.buyBackprompt1Text}),d.stopTimer("BuyBack:web:getBuyBackCrossCategoryOffers")),""!==e.buyBackExchangeItems&&H())})}var m=h.$,e={selectedBuyBackOptions:["","",""],previousSelectedBuyBackOptions:["",""],imeiNumber:"",totalSponsoredValue:0,shouldDisplaySponsorMessage:"1",
purchaseHistoryDiscount:0,enableRefactoring:!1,categoryChosen:"",productCategoryToDbMapping:{tv:"TV",refrigerator:"Refrigerator",laptop:"Laptop",washingmachine:"WashingMachine",tablet:"Tablet",ac:"AC"},bulkyCategories:"tv washingmachine refrigerator ac sofa coffeetable mattress wardrobe recliner shoerack tvunit studytable officechair bed".split(" ")};h.on("a:accordion:buybox-accordion:buyBackAccordionRow:select",function(a){d.increment("BuyBack:web:buyBackAccordionRow:select:count");m=h.$;a=document.getElementById("buyBackDropDown0");
var c=e.crossCategoryOfferAvailable;v();var k=m("#isSlotsAvailable").attr("value");-1<e.bulkyCategories.indexOf(e.buyBackCategory.toLowerCase())&&k!==n&&"false"===k?(d.increment("BuyBack:web:hnbFaddBuyBackSuppression:count"),d.startTimer("BuyBack:web:hnbFaddBuyBackSuppression"),m("#buyBackDropDowns3").parent().addClass("aok-hidden"),m("#buyBackDropDown0").parent().parent().addClass("aok-hidden"),b.hide("maxBuyBackDiscountSection","buyBackDropDowns1","buyBackDropDowns2","buyBackDropDowns3","buyBackSelectDropDown2Alert",
"buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert","buyBackDropDown1Id","buyBackCollectOldProductDetailsText","buybackImeiBlockAlert","buyBackConvenienceFeeTextSection"),b.show("mobileExchangeNotAvailableAtPincode"),l("#buyBackBuyNowButton").disable(),d.stopTimer("BuyBack:web:hnbFaddBuyBackSuppression")):c!==n&&null!==a&&"false"===e.crossCategoryOfferAvailable&&
(d.increment("BuyBack:web:mobileOffersNotAvailable:count"),e.productCategory.toLowerCase()!==e.categoryChosen.toLowerCase()&&(e.buybackCategory=e.productCategory,e.categoryChosen=e.productCategoryToDbMapping[e.productCategory],b.updateBestBuyBackOfferForCategory(e),1<e.noOfQuestions&&x()),b.hide("buyBackDropDowns0SectionId","buyBackDropDown0Id","buyBackDropDown0","mobileExchangeNotAvailableAtPincode","buyBackIMEISection"),b.show("buyBackDropDown1","buyBackDropDown1Id","buyBackDropDowns1"))});h.on("a2i_dpx:buyback:processBBPageState",
function(){var a=m("#buyBackAccordionRow").find("script[type\x3da-state]");p.lazyLoad(a);f.callBBPageState&&f.getUpdatedState();b.auiNewPageStateParseLogicBuyBack();v();y();1<e.noOfQuestions&&e.enableRefactoring&&x();E()});(function(){var a=m("#buyBackDropDown0").val();"undefined"!==typeof a&&""!==a&&u("buyBackDropDown0");a=m("#buyBackDropDown1").val();if("undefined"!==typeof a&&""!==a){var b=m('[id\x3d"'+a+'"]').val();u("buyBackDropDown1");"undefined"!==typeof b&&""!==b&&(u(a),u(a+b))}})();v();y();
1<e.noOfQuestions&&e.enableRefactoring&&x();E()});"use strict";q.when("A").register("bbMetric",function(h){var l=r.ue,g={};return{increment:function(b){"undefined"!==typeof l&&"undefined"!==typeof l.count&&b&&l.count(b,(l.count(b)||0)+1)},stopTimer:function(b){"function"===typeof r.uet&&g.hasOwnProperty(b)&&(delete g[b],r.uet("be",b,{wb:1}),r.uex("ld",b,{wb:1}))},startTimer:function(b){"function"!==typeof r.uet||g.hasOwnProperty(b)||(g[b]=1,r.uet("bb",b,{wb:1}))}}});"use strict";q.when("A","a-button",
"buyback-util","bbMetric","BBPageState","DiagnosticsState","Logger","gep-util","buyBackPageStateStatic").register("DiagnosticsUtils",function(h,l,g,b,f,d,a,p){a.log("DiagnosticsUtils file");var c=h.$,q={shouldDisplaySponsorMessage:"1"};return{buyBackState:f.get(),setupNonAutoDetectAccordionRowCallback:null,startDiagnosticsFlow:function(){a.log("startDiagnosticsFlow");"function"!==typeof submitDiagnosticsForm&&(document.getElementById("backUrl").value=r.location.href,document.getElementById("diagnosticsForm").submit())},
getAndroidVersion:function(){a.log("getAndroidVersion");var b=navigator.userAgent.match(/Android[\/]*[\d\.]+/),c="0.0";null!==b&&null!==b[0]&&(b=b[0].split("/"),null!==b&&(c=b[1]));return parseFloat(c,10)},getAmazonAppVersion:function(){a.log("getAmazonAppVersion");var b=navigator.userAgent.match(/Amazon.com[\/]*[\d\.]+/),c="0.0";null!==b&&null!==b[0]&&(b=b[0].split("/"),null!==b&&(c=b[1]));return parseFloat(c.split(".")[0]+"."+c.split(".")[1],10)},checkPhoneRootedAPI:function(){a.log("checkPhoneRootedAPI");
r.cordova.require("cordova/exec")(this.phoneRootedCallbackSuccess.bind(this),this.phoneRootedCallbackError.bind(this),"MShopMobileAutoDiagnostic","isPhoneRooted",{})},runAutoDetectionAPI:function(){a.log("runAutoDetectionAPI");r.cordova.require("cordova/exec")(this.autoDetectCallback.bind(this),this.autoDetectCallback.bind(this),"MShopMobileAutoDiagnostic","getAutoDetectPhoneInfo",{})},triggerAutoClick:function(){a.log("triggerAutoClick");var b=document.getElementById("buyBackAccordionRow");null!==
b&&b!==n&&b.classList.contains("a-accordion-active")&&!1===d._clickedAlready&&(d._clickedAlready=!0,this.primaryAccordionClick())},triggerAutoClickAfterDiagnostics:function(){a.log("triggerAutoClickAfterDiagnostics");if("BB"===this.buyBackState.programName){b.increment("BuyBack:mobile:autoDiagnosticRunSuccess:count");var d=c("#buyBackAccordionRow a.a-accordion-row");null!==d&&0<d.length&&c(d)[0].click()}},primaryAccordionClick:function(){a.log("primaryAccordionClick");g.hide("autoDetectionAccordion");
g.hide("withAutoDetection-accordion","withoutAutoDetection-accordion");l("#buyBackBuyNowButton").disable();g.hide("buyBackConfirmButton");if("BB"===this.buyBackState.programName){c("#autoDetectionAccordion").show();this.setHiddenRowInElement(c("#withoutAutoDetection-accordion .a-accordion-inner"));var b=c("#withAutoDetection-accordion a.a-accordion-row");g.show("withAutoDetection-accordion","withoutAutoDetection-accordion");null!==b&&0<b.length&&c(b)[0].click();c("#diagnosticsSpinnerDiv").hide();
g.show("autoDetectionAccordion")}else this.runAutoDetection()},runAutoDetection:function(){a.log("runAutoDetection");d._androidVersion=this.getAndroidVersion();d._amazonAppVersion=this.getAmazonAppVersion();5>d._androidVersion?b.increment("BuyBack:mobile:autoDetectionFailedOldAppAndroid:count"):12.7>d._amazonAppVersion?b.increment("BuyBack:mobile:autoDetectionFailedOldAppAmazon:count"):p.isGEPEligibleCustomer(this.buyBackState)?(b.increment("BuyBack:mobile:autoDetectionSkippedGEPCustomer:count"),
d._shouldRunAutoDetect=!1,this.showAutoDetectionResult()):(c("#diagnosticsSpinnerDiv").show(),g.hide("autoDetectionAccordion"),this.checkPhoneRootedAPI(),this.runAutoDetectionAPI())},addAutoDetectDataToState:function(){a.log("addAutoDetectDataToState");this.buyBackState.imeiNumber=d._imeiNumber;this.buyBackState.deviceBrandName=d._deviceBrandName;this.buyBackState.deviceModelName=d._deviceModelName;this.buyBackState.deviceModelId=d._deviceModelId;f._buyBackState=this.buyBackState},showAutoDetectionResult:function(){a.log("showAutoDetectionResult");
if(d._shouldRunAutoDetect&&(!1===d._ranPhoneRooted||!1===d._ranAutoDetection))return!1;c("#diagnosticsSpinnerDiv").hide();g.show("autoDetectionAccordion");if(!1===d._shouldRunAutoDetect||!1===d._isAutoDetectSuccessfull||!0===d._isPhoneRooted)c("#buybackAccordion").remove(),this.setHiddenRowInElement(c("#hidden-accordion-content")),c("#hidden-accordion-content").removeClass("aok-hidden");else{b.increment("BuyBack:mobile:autoDetectionShown:count");this.setHiddenRowInElement(c("#withoutAutoDetection-accordion .a-accordion-inner"));
var k=c("#withAutoDetection-accordion a.a-accordion-row");g.show("withAutoDetection-accordion","withoutAutoDetection-accordion");this.addAutoDetectDataToState();null!==k&&0<k.length&&c(k)[0].click()}},setHiddenRowInElement:function(b){a.log("setHiddenRowInElement");if(this.buyBackState.dflEligible&&null!==d._lastHiddenElem&&0===c("#hidden-accordion-content").html().length)return!1;a.log("setHiddenRowInElement:"+b.selector);c("#hidden-accordion-content").html("");d._lastHiddenElem=b;b.html(d._hiddenRowHTML);
g.setBuyBackExchangeTip("BB",this.buyBackState.dflEligible);this.setupNonAutoDetectAccordionRowCallback()},autoDetectCallback:function(c){a.log("autoDetectCallback");var f=!1;if(null===c.model||c.model===n)b.increment("BuyBack:mobile:autoDetectionFailedAPI:count"),a.log("BuyBack:mobile:autoDetectionFailedAPI:count"),f=!0;if(!f){var h=g.getModelNameFromModelId(c.model,c.brand).MobileModelName;null===h||h===n||""===h?(b.increment("BuyBack:mobile:autoDetectionFailedModel:count"),a.log("BuyBack:mobile:autoDetectionFailedModel:count"),
f=!0):null===c.imeiNumber||c.imeiNumber===n||""===c.imeiNumber?(b.increment("BuyBack:mobile:autoDetectionFailedIMEI:count"),a.log("BuyBack:mobile:autoDetectionFailedIMEI:count"),f=!0):(d._imeiNumber=c.imeiNumber,d._deviceBrandName=c.brand,d._deviceModelName=h,d._deviceModelId=c.model)}f||(c=this.setAutoDetectDiscount(d._deviceBrandName,d._deviceModelName),null!==c&&c!==n&&0!==c.discount)||(b.increment("BuyBack:mobile:autoDetectionFailedDiscount:count"),a.log("BuyBack:mobile:autoDetectionFailedDiscount:count"),
f=!0);d._ranAutoDetection=!0;d._isAutoDetectSuccessfull=!f;this.showAutoDetectionResult()},phoneRootedCallbackSuccess:function(c){a.log("phoneRootedCallbackSuccess");"true"===c.rootedStatus?(b.increment("BuyBack:mobile:autoDetectionFailedRooted:count"),d._isPhoneRooted=!0):d._isPhoneRooted=!1;d._ranPhoneRooted=!0;this.showAutoDetectionResult()},phoneRootedCallbackError:function(c){a.log("phoneRootedCallbackError");d._isPhoneRooted=!1;d._ranPhoneRooted=!0;b.increment("BuyBack:mobile:phoneRootedAPIFailed:count");
this.showAutoDetectionResult()},bindDiagnosticsFunctionality:function(k,u){a.log("bindDiagnosticsFunctionality");this.buyBackState=u?f.get():f.getUpdatedState();this.setupNonAutoDetectAccordionRowCallback=k;var v=this;d._hiddenRowHTML=c("#hidden-accordion-content").html();c("#hidden-accordion-content").html("");a.log("Cleared hidden html");if(u)h.on("a:accordion:buybox-accordion:buyBackAccordionRow:select",function(a){c("#diagnosticsSpinnerDiv").show();g.hide("autoDetectionAccordion");d._clickedAlready=
!0;v.primaryAccordionClick()});else c("#diagnosticsSpinnerDiv").show(),g.hide("autoDetectionAccordion"),d._clickedAlready=!0,v.primaryAccordionClick();c("#autoDiagnosticsIngress").click(function(){b.increment("BuyBack:mobile:runDiagnostic:click:count");v.startDiagnosticsFlow()});h.on("a2i_dpx:buyback:processBBPageState",function(){a.log("diagnostics:a2i_dpx:buyback:processBBPageState");v.buyBackState=f.getUpdatedState()});h.on("a:accordion:buybackAccordion:withAutoDetection-accordion:select",function(a){l("#buyBackBuyNowButton").disable();
g.hide("buyBackConfirmButton");v.accordionClick()});this.triggerAutoClick();this.triggerAutoClickAfterDiagnostics()},setAutoDetectDiscount:function(b,c){a.log("setAutoDetectDiscount");var g={discount:0,offerId:""};if(null!==this.buyBackState.buyBackExchangeItems&&this.buyBackState.buyBackExchangeItems!==n){for(var f=0;f<this.buyBackState.buyBackExchangeItems.length;f++){var h=this.buyBackState.buyBackExchangeItems[f];if(b.toUpperCase()===h.header.toUpperCase()){d._deviceBrandName=h.header;for(var h=
h.containedBuyBackProductNodes,l=0;l<h.length;l++)if(c.toUpperCase()===h[l].header.toUpperCase())return g.discount=h[l].buyBackProductDetails.buyBackOfferDetailsList[0].discountPrice,g.offerId=h[l].buyBackProductDetails.buyBackOfferDetailsList[0].offerId,g}}return g}},accordionClick:function(){a.log("accordionClick");"BB"!==this.buyBackState.programName?this.showADRowBeforeDiagnostics():(d._imeiNumber=this.buyBackState.imeiNumber,d._deviceBrandName=this.buyBackState.deviceBrandName,d._deviceModelName=
this.buyBackState.deviceModelName,this.showADRowAfterDiagnostics())},showADRowBeforeDiagnostics:function(){a.log("showADRowBeforeDiagnostics");g.hide("autoDiagnosticsIngress");c("#brand").text(d._deviceBrandName).removeClass("hide").addClass("show");c("#deviceBrand").val(d._deviceBrandName);c("#model").text(d._deviceModelName).removeClass("hide").addClass("show");c("#deviceModel").val(d._deviceModelName);c("#imei").val(d._imeiNumber);var k=this.setAutoDetectDiscount(d._deviceBrandName,d._deviceModelName),
h=g.getSponsoredDiscount(this.buyBackState,k.offerId,k.discount,d._imeiNumber,q),v=q.shouldDisplaySponsorMessage;c("#deviceBuyBackDiscount").val(parseFloat(k.discount));c("#deviceSponsorDiscount").val(parseFloat(h));var p=g.getMaxDiagnosticsDiscount(this.buyBackState,d._imeiNumber),t;0===p||1>parseFloat(p.MaximumDiagnosticDiscount)?(t=parseFloat(k.discount)+parseFloat(h),k=parseFloat(this.buyBackState.productPrice)-(parseFloat(k.discount)+parseFloat(h)),g.hide("autoDiagnosticsIngressRunDiagnosticText")):
null!==p.DisplayableDiagnosticDiscount&&0!==parseFloat(p.DisplayableDiagnosticDiscount,10)?(t=parseFloat(k.discount)+parseFloat(h)+parseFloat(p.DisplayableDiagnosticDiscount),k=parseFloat(this.buyBackState.productPrice)-(parseFloat(k.discount)+parseFloat(h)+parseFloat(p.DisplayableDiagnosticDiscount)),c("#diagnosticsDiscountsReceivedValue").text(p.DisplayableDiagnosticDiscount),g.showInline("diagnosticsDiscountsReceivedText","diagnosticsDiscountsReceivedValue"),c("#maxDisplayedDiscountValue").val(p.MaximumDiagnosticDiscount),
g.hide("autoDiagnosticsIngressRunDiagnosticText"),g.show("autoDiagnosticsIngressRunAgainText")):(t=parseFloat(k.discount)+parseFloat(h),k=parseFloat(this.buyBackState.productPrice)-(parseFloat(k.discount)+parseFloat(h)),g.showInline("getAdditionalDiagnosticsDiscountText","getAdditionalDiscountvalue"),c("#getAdditionalDiscountvalue").text(p.MaximumDiagnosticDiscount),c("#maxDisplayedDiscountValue").val(p.MaximumDiagnosticDiscount));0!==parseFloat(h)&&"1"===v&&(c("#mdSponsoredDiscountValue").text(parseFloat(h)),
g.showInline("mdSponsoredDiscountValue"),g.show("mdSponsoredDiscountText"),b.increment("BuyBack::shouldDisplaySponsorMessage:count"));this.applyChargeFee();""!==this.buyBackState.convenienceFee?(h=Number(this.buyBackState.convenienceFee),k+=parseFloat(this.buyBackState.convenienceFee),c("#isBuyBackFee")[0]===n?this.addBuyBackFeeAsDigitalToBuyBackForm():this.setCustomKeyValueForFeeAsin(),g.show("buyBackConvenienceFeeTextSection"),c("#buyBackConvenienceFeeTextSection #convenienceFeeCharge").text(h),
this.buyBackState.dflEligible||(g.show("buyBackConvenienceFeeTextSectionForSOPP","mdBuyBackConvenienceFeeTextSectionForSOPP"),c("#buyBackConvenienceFeeTextSectionForSOPP #convenienceFeeCharge").text(h),c("#mdBuyBackConvenienceFeeTextSectionForSOPP #convenienceFeeCharge").text(h))):this.resetFeeFormParams();this.buyBackState.deviceTotalDiscount=t;f._buyBackState=this.buyBackState;g.show("autoDiagnosticsIngress");c("#mdTotalDiscountValue").text(t);g.showInline("mdTotalDiscountCurrency","mdTotalDiscountValue");
c("#priceAfterBuyBackDiscount").text(g.getFormattedPrice(k));g.hide("maxBuyBackDiscountSection");g.show("priceAfterBuyBackDiscountSection");l("#buyBackBuyNowButton").enable();g.show("buyBackConfirmButton")},addBuyBackFeeAsDigitalToBuyBackForm:function(){c("#buyBackBuyNow").append('\x3cinput type\x3d"hidden" id\x3d"isBuyBackKey" name\x3d"custom-name.2.1" value\x3d"UNIQ-buyBack"\x3e\x3cinput type\x3d"hidden" id\x3d"isBuyBackFee" name\x3d"custom-value.2.1" value\x3d"BuyBackFee"\x3e')},setCustomKeyValueForFeeAsin:function(){c("#isBuyBackKey").val("UNIQ-buyBack");
c("#isBuyBackFee").val("BuyBackFee")},resetFeeFormParams:function(){c("#isBuyBackKey")[0]!==n&&c("#isBuyBackKey")[0].value!==n&&c("#isBuyBackKey").val("");c("#isBuyBackFee")[0]!==n&&c("#isBuyBackFee")[0].value!==n&&c("#isBuyBackFee").val("")},applyChargeFee:function(){var a=this.buyBackState.buyBackCategory.toLowerCase()+"_mobile";this.buyBackState.convenienceFee="";if(this.buyBackState.feeMap===n)a="BuyBack:mobile:noEntryExistsFor"+this.buyBackState.buyBackCategory.toLowerCase()+":count",b.increment(a);
else if(this.buyBackState.feeMap.map[a]===n)b.increment("BuyBack:mobile:noEntryExistsFor"+a+":count");else if(!0===this.buyBackState.feeMap.map[a].feeEnabled){this.buyBackState.convenienceFee=this.buyBackState.feeMap.map[a].price;c("#feeAsinPrice").val(this.buyBackState.convenienceFee);var d=this.buyBackState.pageLoadAsinList+"|"+this.buyBackState.feeMap.map[a].asin;c("#buyBackBuyNow #a").val(d);a=this.buyBackState.pageLoadOfferingIdList+"|"+this.buyBackState.feeMap.map[a].offeringId;c("#buyBackBuyNow #oid").val(a);
a=this.buyBackState.pageLoadQuantity+"|1";c("#buyBackBuyNow #quantity").val(a)}else b.increment("BuyBack:mobile:feeDisabledFor"+a+":count")},showADRowAfterDiagnostics:function(){a.log("showADRowAfterDiagnostics");c("#brand").text(d._deviceBrandName).removeClass("hide").addClass("show");c("#deviceBrand").val(d._deviceBrandName);c("#model").text(d._deviceModelName).removeClass("hide").addClass("show");c("#deviceModel").val(d._deviceModelName);c("#imei").val(d._imeiNumber);if(isNaN(this.buyBackState.deviceSponsoredDiscount)||
null===this.buyBackState.deviceSponsoredDiscount||""===this.buyBackState.deviceSponsoredDiscount)this.buyBackState.deviceSponsoredDiscount="0.0";var b=parseFloat(this.buyBackState.deviceBuyBackDiscount,10)+parseFloat(this.buyBackState.deviceSponsoredDiscount,10)+parseFloat(this.buyBackState.deviceDiagnosticsDiscount,10);this.buyBackState.deviceTotalDiscount=b;f._buyBackState=this.buyBackState;c("#mdTotalDiscountValue").text(b);g.showInline("mdTotalDiscountCurrency","mdTotalDiscountValue");c("#diagnosticsDiscountsReceivedValue").text(this.buyBackState.deviceDiagnosticsDiscount);
g.showInline("diagnosticsDiscountsReceivedText","diagnosticsDiscountsReceivedValue");b=parseFloat(this.buyBackState.devicePriceAfterDiagnostics,10);this.applyChargeFee();if(""!==this.buyBackState.convenienceFee){var h=Number(this.buyBackState.convenienceFee),b=b+parseFloat(this.buyBackState.convenienceFee);c("#isBuyBackFee")[0]===n?this.addBuyBackFeeAsDigitalToBuyBackForm():this.setCustomKeyValueForFeeAsin();g.show("buyBackConvenienceFeeTextSection");c("#buyBackConvenienceFeeTextSection #convenienceFeeCharge").text(h);
this.buyBackState.dflEligible||(g.show("buyBackConvenienceFeeTextSectionForSOPP","mdBuyBackConvenienceFeeTextSectionForSOPP"),c("#buyBackConvenienceFeeTextSectionForSOPP #convenienceFeeCharge").text(h),c("#mdBuyBackConvenienceFeeTextSectionForSOPP #convenienceFeeCharge").text(h))}else this.resetFeeFormParams();c("#priceAfterBuyBackDiscount").text(g.getFormattedPrice(b));g.hide("maxBuyBackDiscountSection");g.show("priceAfterBuyBackDiscountSection");b=g.getMaxDiagnosticsDiscount(this.buyBackState,d._imeiNumber);
c("#maxDisplayedDiscountValue").val(b.MaximumDiagnosticDiscount);g.hide("autoDiagnosticsIngressRunDiagnosticText");g.show("autoDiagnosticsIngressRunAgainText");l("#buyBackBuyNowButton").enable();g.show("buyBackConfirmButton")}}});"use strict";q.when("A","a-dropdown").register("bb-first-dropdown",function(h,l){var g=h.$;return{loadOptions:function(b){var f=l.getSelect("buyBackDropDown1");f&&g.each(b,function(b,a){f.addOption({text:a.header,value:a.header},b)})}}});"use strict";q.when("A","a-dropdown",
"bb-first-dropdown","bbMetric").register("BBPageStateHelper",function(h,l,g,b){function f(d){var c="";d={type:"post",url:"/gp/product/features/buyback/buyBackOffersForCategory.html?"+a.param({encryptedMarketPlaceId:d.marketPlaceId,asin:d.asin,productPrice:d.productPrice,brand:d.brand,subCategoryName:d.subCategoryName,encryptedMerchantId:d.sellerId,postalCode:d.buyBackPostalCode,buyBackCategory:"",rbnHierarchyNodes:d.categoryIdentifier}),async:!1,success:function(a){var d;try{d=JSON.parse(a)}catch(g){b.increment("BBPageStateHelper:fetchBuyBackExchangeItems:invalidResponse"),
c=""}if("undefined"!==typeof d&&"SERVICE-SUCCESS"===d.status){var f;c="";if(""!==d.BestBuyBackOffer&&null!==d.BestBuyBackOffer)try{f=JSON.parse(d.BestBuyBackOffer),c=f.containedBuyBackProductNodes,b.increment("BBPageStateHelper:fetchBuyBackExchangeItems:success")}catch(g){b.increment("BBPageStateHelper:fetchBuyBackExchangeItems:invalidJSON"),c=""}}},error:function(){c="";b.increment("BBPageStateHelper:fetchBuyBackExchangeItems:failure")}};b.startTimer("BBPageStateHelper:ajax:fetchBuyBackExchangeItems");
a.ajax(d);b.stopTimer("BBPageStateHelper:ajax:fetchBuyBackExchangeItems");return c}function d(b){if(b){var c=a.parseJSON(b.html());if(c&&c.hasValidBuyBackOffers&&"false"===c.crossCategoryOfferAvailable&&(!c.buyBackExchangeItems||0===c.buyBackExchangeItems.length)){var d=f(c);c.buyBackExchangeItems=d;h.state.replace("buyBackPageState",c);b.html(JSON.stringify(c));g.loadOptions(d)}}}var a=h.$;l=a("#buyBackAccordionRow").find("script[type\x3da-state]");d(l);return{lazyLoad:d}});"use strict";q.when("A",
"BBPageStateHelper").register("BBPageState",function(h){h.on("a:pageUpdate",function(){h.trigger("a2i_dpx:buyback:processBBPageState")});return{_buyBackState:null,callBBPageState:!1,init:function(){h.state.parse();this._buyBackState=h.state("buyBackPageState")},get:function(){null===this._buyBackState&&this.init();return this._buyBackState},getUpdatedState:function(){var l;(l=h.$("#buyBackAccordionRow").find("script[type\x3da-state]").html())?l=h.$.parseJSON(l):(l=h.state("buyBackPageState"),l||(h.state.parse(),
l=h.state("buyBackPageState")));return l}}});q.when("A").register("buyBackPageStateStatic",function(h){});"use strict";q.when("A").register("DiagnosticsState",function(h){return{_isPhoneRooted:null,_isAutoDetectSuccessfull:null,_clickedAlready:!1,_ranAutoDetection:!1,_ranPhoneRooted:!1,_imeiNumber:"",_deviceBrandName:"",_deviceModelName:"",_deviceModelId:"",_amazonAppVersion:"",_androidVersion:"",_hiddenRowHTML:"",_lastHiddenElem:null,_shouldRunAutoDetect:!0}});"use strict";q.when("A").register("Logger",
function(h){return{_enable:!1,log:function(h){this._enable&&console.log(h)}}});"use strict";q.when("A","BBPageState","buyBackPageStateStatic").execute(function(h,l){function g(){d(a).unbind("click").click(function(){f||(f=1,d("#bb-warranty-container").append(d(p+" #addToCart #abbWrapper")))});d(p).unbind("click").click(function(){f&&(f=0,1===c.length&&q.before(d("#bb-warranty-container #abbWrapper")))})}function b(){0<d("#withExchangeOffer-accordion").length?(a="#withExchangeOffer-accordion",p="#withoutExchangeOffer-accordion",
c=d(p+" #addToCart").children(".a-section")):(a="#buyBackAccordionRow",p="#newAccordionRow",c=d(p+" #addToCart  #desktop_qualifiedBuyBox").children(".a-section"));q=d(p+" #addToCart #abbWrapper").next()}var f=0,d=h.$,a="",p="",c="",q=null;l.init();l=l.get();l!==n&&"T1"===l.warrantyWeblabTreatment&&!0===l.hasValidBuyBackOffers&&(b(),g(),h.on("a:pageUpdate",function(){f=0;b();g()}))});q.when("A").execute(function(h){function l(){g("#buyBackBuyNowButton").unbind("click").click(function(){var b=g("#buyBackBuyNow"),
f=b.find('input[name\x3d"itemCount"]');0===f.length?b.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"14"\x3e'):f[0].value=14})}var g=h.$;l();h.on("a2i_dpx:buyback:processBBPageState",function(){l()})});"use strict";q.when("A").register("bbg-atc-handler-component",function(h){var l=!1;return{setBbgAddToCartApiCalled:function(g){l=g},isBbgAddToCartApiCalled:function(){return l}}});"use strict";q.when("A","a-checkbox","a-modal","BBPageState","bbMetric","buyBackPageStateStatic").execute(function(h,
l,g,b,f){function d(a,d){a=p("form\x3d[id\x3d"+d+"]");if(0===a.find('input[class^\x3d"bbgInputData"]').length){c=b.getUpdatedState();var g=c.bbgAsin,f=c.bbgAsinOfferingId,h=c.bbgOfferId,k=h+"-"+(new Date).getTime(),l=a.find("input[name^\x3d'offeringID']").length+1,g='\x3cinput class\x3d"bbgInputData-'+d+'" type\x3d"hidden" id\x3d"asin.'+l+'" name\x3d"asin.'+l+'" value\x3d"'+g+'"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" type\x3d"hidden" id\x3d"quantity.'+l+'" name\x3d"quantity.'+l+'" value\x3d"1"\x3e\x3cinput class\x3d"bbgInputData-'+
d+'" type\x3d"hidden" id\x3d"offeringID.'+l+'" name\x3d"offeringID.'+l+'" value\x3d"'+f+'"\x3e',f=l+1,f='\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-name.'+f+'.1" name\x3d"custom-name.'+f+'.1" value\x3d"itemAssoc" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-value.'+f+'.1" name\x3d"custom-value.'+f+'.1" value\x3d"'+k+'" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-name.'+f+'.2" name\x3d"custom-name.'+f+'.2" value\x3d"itemAssocType" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+
d+'" id\x3d"custom-value.'+f+'.2" name\x3d"custom-value.'+f+'.2" value\x3d"BuyBackGuarantee" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-name.'+f+'.3" name\x3d"custom-name.'+f+'.3" value\x3d"bbgOfferingId" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-value.'+f+'.3" name\x3d"custom-value.'+f+'.3" value\x3d"'+h+'" type\x3d"hidden"\x3e',n=a.find("input[name^\x3d'custom-name.1.']").length+1;d='\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-name.1.'+
n+'" name\x3d"custom-name.1.'+n+'" value\x3d"itemAssoc" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-value.1.'+n+'" name\x3d"custom-value.1.'+n++ +'" value\x3d"'+k+'" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-name.1.'+n+'" name\x3d"custom-name.1.'+n+'" value\x3d"UNIQ-itemAssoc" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-value.1.'+n+'" name\x3d"custom-value.1.'+n++ +'" value\x3d"'+k+'" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+
d+'" id\x3d"custom-name.1.'+n+'" name\x3d"custom-name.1.'+n+'" value\x3d"itemAssocType" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-value.1.'+n+'" name\x3d"custom-value.1.'+n++ +'" value\x3d"BuyBackGuarantee" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-name.1.'+n+'" name\x3d"custom-name.1.'+n+'" value\x3d"bbgOfferingId" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+d+'" id\x3d"custom-value.1.'+n+'" name\x3d"custom-value.1.'+n++ +
'" value\x3d"'+h+'" type\x3d"hidden"\x3e';d=g+f+d;h=a.find('input[name\x3d"itemCount"]');0===h.length?d+='\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+l+'"\x3e':h.value+=1;a.append(d)}}function a(){c=b.getUpdatedState();!0===c.isbbgOfferAvailable&&(p("[id^\x3d'bbg-checkbox-']").unbind("click").click(function(a){this.checked?d(a,this.value):p(".bbgInputData-"+this.value).remove()}).each(function(){this.checked?d(event,this.value):p(".bbgInputData-"+this.value).remove()}),p("[id^\x3d'bbg-addButton-']").unbind("click").click(function(a){d(a,
this.value);var b=l("#bbg-checkbox-"+this.value),c=g.get(p("#bbg-featureDiv-"+this.value));b.check();null!==c&&c.hide();a.preventDefault()}),p("[id^\x3d'bbg-skipButton-']").unbind("click").click(function(a){p(".bbgInputData-"+this.value).remove();var b=l("#bbg-checkbox-"+this.value),c=g.get(p("#bbg-featureDiv-"+this.value));b.uncheck();null!==c&&c.hide();a.preventDefault()}),q.forEach(function(a){p(document).undelegate(a,"click.bbg");!0===c.isbbgOfferAvailable&&p(document).delegate(a,"click.bbg",
{form:a},k)},q))}var p=h.$;b.init();var c=b.get(),q=["#add-to-cart-button","#buy-now-button","#buyBackBuyNowButton"],k=function(a){p(a.data.form).find('input[class^\x3d"bbgInputData"]')&&(f.increment("BuyBackGuarantee:desktop:bbgAdded:count"),f.increment("BuyBackGuarantee:desktop:bbgAdded:count"+a.data.form))};c!==n&&(h.on("a2i_dpx:buyback:processBBPageState",function(){a()}),a())});"use strict";q.when("A","a-button","BBPageState","bbMetric","buyback-util","buyBackPageStateStatic").register("gep-util",
function(h,l,g,b,f){var d=h.$;g.init();h={bbPageState:g.get(),isGEPEligibleCustomer:function(a){return"undefined"===typeof a?this.bbPageState.gepEligibleCustomer:a.gepEligibleCustomer},showGEPInfoDiv:function(a){a.selectedBuyBackOfferData.gepEligibleBrandModel&&(0===a.selectedBuyBackOfferData.discountPrice?this.showGEPDivsWhenRegularExchangeNotPresent():(f.hide("buyBackVerifyIMEIText","buyBackGEPIMEISuccessAlert","buyBackGEPNotEligibleAlert","buyBackGEPSuccessNotes"),f.show("buyBackGEPIMEIInfoAlert"),
b.increment("BuyBack::gepInfoShown:count"),b.increment("BuyBack:GEP:gepEligibleBrandModelSelected:count")))},showGEPDivsWhenRegularExchangeNotPresent:function(){f.hide("priceAfterBuyBackDiscountSection","buyBackOfferAppliedSuccess","buyBackExchangeMightBeEligibleText","buyBackCollectOldProductDetailsText","buyBackVerifyIMEIText","buyBackGEPIMEISuccessAlert","buyBackGEPNotEligibleAlert","buyBackGEPSuccessNotes");f.show("maxBuyBackDiscountSection","buyBackGEPIMEIInfoAlert","buyBackDetailsVerifyText");
b.increment("BuyBack:GEP:brandModelshownWhenExchangeOfferNotPresent:count");b.increment("BuyBack:GEP:gepEligibleBrandModelSelected:count")},showGEPDivPostIMEIValidation:function(a){b.increment("BuyBack:GEP:IMEIVerifiedWithCashify:count");a.discountAppliedText?a.gepSuccessNoteText?(d("#buyBackGEPIMEISuccessAlert span").html(a.discountAppliedText),d("#buyBackGEPSuccessNotes span").html(a.gepSuccessNoteText),f.show("buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes"),f.hide("buyBackOfferAppliedSuccess",
"buyBackGEPNotEligibleAlert"),b.increment("BuyBack:GEP:successNoteShown:count")):a.gepFailureNoteText?(b.increment("BuyBack:GEP:gepNotEligible:count"),d("#buyBackGEPNotEligibleAlert").html(a.gepFailureNoteText),f.hide("buyBackGEPIMEISuccessAlert"),f.show("buyBackGEPNotEligibleAlert","buyBackOfferAppliedSuccess")):(b.increment("BuyBack:GEP:EmptySucessAndFailureNote:count"),f.hide("buyBackGEPIMEISuccessAlert","buyBackGEPNotEligibleAlert"),f.show("buyBackOfferAppliedSuccess")):(f.hide("buyBackIMEISection",
"buyBackOfferAppliedSuccessText","buyBackSponsoredDiscountText"),f.show("buyBackExchangeMightBeEligibleText","buyBackOfferAppliedSuccess"),l("#buyBackBuyNowButton").disable(),b.increment("BuyBack:GEP:gepNotEligibleWhenRegularExchangeNotPresent:count"))}};0===d("#buyBackExchangeMightBeEligibleText").length&&0<d("#buyBackOfferAppliedSuccess").length&&d("#buyBackOfferAppliedSuccess").append('\x3cspan id\x3d"buyBackExchangeMightBeEligibleText" class\x3d"a-size-mini hide"\x3e\x3cdiv class\x3d"a-box a-alert-inline a-alert-inline-error a-spacing-top-mini"\x3e\x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\x3cdiv class\x3d"a-alert-content"\x3e\x3cspan class\x3d"a-size-base"\x3eYour device is not eligible for exchange. Select a different model.\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/span\x3e');
return h});"use strict";q.when("A","bbMetric").register("buyback-suppress-addToCart",function(h,l){var g=h.$;return{hide:function(){g("#addToCart_feature_div").removeClass("show").addClass("hide");l.increment("AddToCartHandler:button:hide:count")},show:function(){g("#addToCart_feature_div").removeClass("hide").addClass("show");l.increment("AddToCartHandler:button:show:count")}}});"use strict";q.when().register("SOPPHelper",function(){return{loadPageState:function(){}}})});
/* ******** */
(function(m){var q=window.AmazonUIPageJS||window.P,v=q._namespace||q.attributeErrors,a=v?v("DetailPageAlohaAssets",""):q;a.guardFatal?a.guardFatal(m)(a,window):a.execute(function(){m(a,window)})})(function(m,q,v){m.when("A","a-modal","a-checkbox","aloha-simplebundle-common","ready").execute(function(a,h,d,c){function e(){a.declarative("show-review-tab","click",function(c){a.$(c.$target).closest(b.AUI_PAGE_ROOT).find(".popoverReviewsTab").click()});a.declarative("add-to-cart","click",function(c){a.$(b.SB_ROOT+
" "+b.SB_BUYBOX_ITEM_CHECKBOX+" "+b.INPUT_TYPE_CHECKBOX).filter(function(){return a.$(this).data("asin")===c.data.asin}).prop("checked",!0).change();a.$("[id^\x3dpopover-simpleBundle-]").each(function(){var b=h.get(a.$(this));b.isActive()&&b.hide()})});a.declarative("focus-image","mouseenter",function(a){var c=a.$target,d=c.parents(b.AUI_PAGE_ROOT);a=a.data;d.find("#productImageMain-"+a.asin).attr("src",a.imageUrl);d.find(".thumbnail-group").removeClass("a-button-selected");d.find("#"+c.prop("name")).addClass("a-button-selected")})}
var b={BUYBOX_ACCORDION:"#buyBoxAccordion",ADD_TO_CART_FORM:"#addToCart, #buyBackBuyNow",ADD_TO_CART_ATTACH_BUTTON:"#add-to-cart-button.attach-dss-atc:button",SESSION_ID:"#session-id",OFFER_LISTING_ID:"#offerListingID, #oid",AUI_MODAL_SCROLLER:".a-modal-scroller",AUI_PAGE_ROOT:"#a-page",INPUT_TYPE_CHECKBOX:"input[type\x3d'checkbox']",BASE_PRODUCT_PRICE:"#base-product-price",BASE_PRODUCT_PRICE_DATA:"base-product-price",SB_ROOT:".showBundleAsins.simpleBundleFeatureContainer",SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX:".simple-bundle-item-expand-header-",
SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX:".simple-bundle-item-expander-content-",SB_EXPANDED_MODAL_LINK:".simple-bundle-buybox-expanded-modal-link",SB_EXPANDED_MODAL_ITEM_LINK_PREFIX:".simple-bundle-item-link-",SB_ACCESSORY_ITEM_LINK_PREFIX:".popover-simpleBundle-link-",SB_BUYBOX_ITEM_CHECKBOX:".simple-bundle-buybox-item-checkbox",SB_BUYBOX_CHECKBOX_PREFIX:".simple-bundle-item-",SB_EXPANDED_CHECKBOX_PREFIX:".simple-bundle-modal-item-",SB_EXPANDER_TITLE:".aloha-simple-bundle-expand-header-title"},
g=!1;d=a.debounce(function(){var d=a.$(b.SB_ROOT);if(d.length){var f=a.$(b.ADD_TO_CART_FORM),n=f.find(":submit").length&&f.find(b.OFFER_LISTING_ID).val(),h=a.$(b.ADD_TO_CART_ATTACH_BUTTON),q=h.length;if(n||q){e();var m=c.getSimpleBundlePageState()||{},w=m.expandedBuyboxEnabled,x=m.selectionMode||"SINGLE",p=m.items||[],z=[],B=a.$(b.SESSION_ID).val(),F=d.find(b.SB_EXPANDED_MODAL_LINK),A,t={baseAsin:m.baseAsin,marketplaceId:m.marketPlaceId,baseItemPrice:a.$(b.BASE_PRODUCT_PRICE).data(b.BASE_PRODUCT_PRICE_DATA),
clientType:"aloha-simplebundle-desktop",currencyOfPreferenceSupported:m.currencyOfPreferenceSupported||!1},u=c.createMetricsLogger(t);g||(g=!0,a.defer(function(){u.logNexusImpression(p);u.logImpressionRefTag()}));F.click(function(a){a.originalEvent&&u.logExpandedLink()});p.forEach(function(e,l){function y(){var c=!1;g.click(function(){c=!c});d.find(b.SB_EXPANDED_MODAL_ITEM_LINK_PREFIX+l).click(function(){c||g.click();F.click();A=A||a.$(b.AUI_MODAL_SCROLLER);A.scrollTop(g.offset().top-A.offset().top+
A.scrollTop())})}function r(){var c=d.find(b.SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX+l),y="/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?asin\x3d"+e.asin+"\x26marketplaceId\x3d"+m.marketPlaceId+"\x26offerId\x3d"+e.offerListingId+"\x26activeTab\x3d0",r="a:expander:simple-bundle-item-expander-"+l+":toggle",f=a.once(function(){c.load(y,null,function(b,l,d){a.$.trim(c.html())?(c.find(".a-span-last \x3e .a-spacing-top-base").remove(),c.find(".popover-add-to-cart-button").remove(),b=c.find("#a-page \x3e div \x3e div.a-row"),
l=c.find(".popover-in-stock"),l.remove(),l.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),b.append(l),l=c.find(".popover-ship-sold-by"),l.remove(),l.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),b.append(l),l=c.find(".popover-retail-domain"),l.remove(),b.append(l),b=c.find("#a-page \x3e div \x3e div.a-column.a-span9"),b.removeClass("a-span9"),b.addClass("a-span12")):c.text(m.ajaxFailMsg)})}),p=r+":expand";a.off(p);a.on(p,function(d){u.logItemLink(l);g.find(b.SB_EXPANDER_TITLE).removeClass("aloha-simple-bundle-expand-header-title-truncate");
a.$.trim(c.html())||f()});r+=":collapse";a.off(r);a.on(r,function(a){g.find(b.SB_EXPANDER_TITLE).addClass("aloha-simple-bundle-expand-header-title-truncate")})}var g=d.find(b.SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX+l);if(w)y(),r();else{var f=d.find(b.SB_ACCESSORY_ITEM_LINK_PREFIX+l);f.unbind("click.MiniDpClickHandler");f.bind("click.MiniDpClickHandler",function(){u.logItemLink(l);u.logNexusOpenMiniDP(l,e);u.logMiniDPRefTag(l)})}c.setupCheckboxes(z,l,e,m.maxBuyboxItemsDesktop,b.SB_BUYBOX_CHECKBOX_PREFIX+
l+" "+b.INPUT_TYPE_CHECKBOX,b.SB_EXPANDED_CHECKBOX_PREFIX+l+" "+b.INPUT_TYPE_CHECKBOX,b.SB_BUYBOX_CHECKBOX_PREFIX+l,b.SB_EXPANDED_CHECKBOX_PREFIX+l,x)});t=a.$(b.BUYBOX_ACCORDION);t.length?t.children().each(function(){f=a.$(this).find(b.ADD_TO_CART_FORM);var d=f.find(b.ADD_TO_CART_ATTACH_BUTTON),l=d.length,g=f.find(b.SB_ROOT).length,r=f.find(":submit").length&&f.find(b.OFFER_LISTING_ID).val();g&&r&&c.setupAddToCart(f,z,p,u,B,w);l&&c.setupAddToCartForButton(d,z,p,u,B,w,f)}):(n&&c.setupAddToCart(f,z,
p,u,B,w),q&&c.setupAddToCartForButton(h,z,p,u,B,w,f))}else d.hide()}},200);d();a.on("a:pageUpdate",d)});"use strict";m.when("A","a-checkbox","aloha-uatc","aloha-buy-now-integration","aloha-buybox-form-util","aloha-buy-back-integration","abb-buynow-api").register("aloha-simplebundle-common",function(a,h,d,c,e,b,g){function k(b,c){var d=a.$(b);d.change(function(){d.prop("checked",this.checked);var b={asin:d.data("asin"),offeringID:d.data("offeringID"),quantity:d.data("quantity")};this.checked?(g.addFormParams("#buyNow",
b),g.addFormParams("#buyBackBuyNow",b),g.addFormParams("#buyNowCheckout",b)):(g.removeFormParams("#buyNow",b),g.removeFormParams("#buyBackBuyNow",b),g.removeFormParams("#buyNowCheckout",b))});var e=a.$(c);e.length||(e=d);return{$element:d,$container:e,api:h(b),show:function(){e.hasClass(x.AUI_HIDDEN)&&e.removeClass(x.AUI_HIDDEN);e.show()},hide:function(){e.hasClass(x.AUI_HIDDEN)||e.addClass(x.AUI_HIDDEN)},isVisible:function(){return!e.hasClass(x.AUI_HIDDEN)}}}function f(b,a,c){a.forEach(function(a){b.addItem(a.asin,
a.offerListingId,a.quantity);c.logCheckboxSelected(a.index,a.quantity);c.logAddToCartRefTag(a.index)})}function n(b,a,c){var d=[],e=[];a.forEach(function(a,g){var f=b[g];a.api.isChecked()?d.push({asin:f.asin,offerListingId:f.offerListingId,ourPrice:f.ourPrice,ourPriceAmount:f.ourPriceAmount,ourPriceSymbol:f.ourPriceSymbol,ourPriceCode:f.ourPriceCode,index:g,quantity:c}):e.push({asin:f.asin,ourPrice:f.ourPrice,ourPriceAmount:f.ourPriceAmount,ourPriceSymbol:f.ourPriceSymbol,ourPriceCode:f.ourPriceCode,
index:g,isVisible:a.isVisible()})});return{selectedLineItems:d,unselectedItems:e}}var v=/[^\d,\.]/g,D=/,/g,E=/\./g,w=/(^\D+|\D+$)/,x={AUI_HIDDEN:"aok-hidden"};return{createMetricsLogger:function(b){function c(b,a){q.ue&&q.ue.count&&q.ue.count("aloha-simplebundle-"+b,a)}function d(){var a;a=b.currencyOfPreferenceSupported?{priceFormatted:b.baseItemPrice,priceDecimal:null,currencySymbol:null}:k(b.baseItemPrice);return{baseAsin:b.baseAsin,baseItemPrice:a.priceFormatted,baseItemCurrencySymbol:a.currencySymbol,
baseItemPriceDecimal:a.priceDecimal,clientType:b.clientType,feature:"abb"}}function e(a,c){q.ue&&q.ue.event&&(a.requestId=h,a.producerId="atch",a.obfuscatedMarketplaceId=b.marketplaceId,q.ue.event(a,"atch",c,{ssd:!0}))}function f(b){a.ajax("/gp/product/ajax-handlers/reftag.html?ref_\x3d"+b,{method:"get"})}function g(a){return b.currencyOfPreferenceSupported?{priceFormatted:a.ourPrice,priceDecimal:parseFloat(a.ourPriceAmount)||null,currencySymbol:a.ourPriceSymbol}:k(a.ourPrice)}function k(a){a=a||
"";var b=a.lastIndexOf(","),c=a.lastIndexOf("."),d;b>c?(c=E,d=D):(c=D,d=E);(b=a.match(w))&&(b=b[0].trim());c=a.replace(v,"").replace(c,"").replace(d,".");c=parseFloat(c);return{priceFormatted:a,currencySymbol:b,priceDecimal:c}}var h=Date.now().toString(10)+Math.random().toString(16).substring(2,13);a.defer(function(){c("view",1)});return{logAddToCart:function(a){c("addtocart",a)},logExpandedLink:function(){c("buybox-expanded-link",1)},logCheckboxSelected:function(a,b){c("checkbox-"+(a+1),b)},logItemLink:function(a){c("link-"+
(a+1),1)},logImpressionRefTag:function(){f("dp_atch_abb_i")},logAddToCartRefTag:function(a){f("dp_atch_abb_atc_"+(a+1))},logMiniDPRefTag:function(a){f("dp_atch_abb_smdp_"+(a+1))},logNexusImpression:function(a){var b=d();b.accessories=a.map(function(a,b){var c=g(a);return{asin:a.asin,displayPosition:b+1,price:c.priceFormatted,currencySymbol:c.currencySymbol,priceDecimal:c.priceDecimal}});e(b,"attach.ABBImpression.5")},logNexusAddBaseToCart:function(a,b,c){var f=d();f.baseQuantity=Number(c);f.accessoriesAdded=
a.map(function(a){var b=g(a);return{asin:a.asin,displayPosition:a.index+1,quantity:Number(a.quantity),price:b.priceFormatted,currencySymbol:b.currencySymbol,priceDecimal:b.priceDecimal}});f.accessoriesNotAdded=b.map(function(a){var b=g(a);return{asin:a.asin,displayPosition:a.index+1,price:b.priceFormatted,currencySymbol:b.currencySymbol,priceDecimal:b.priceDecimal}});e(f,"attach.ABBAddBaseToCart.9")},logNexusOpenMiniDP:function(a,b){var c=g(b),f=d();f.accessoryAsin=b.asin;f.accessoryDisplayPosition=
Number(a)+1;f.accessoryPrice=c.priceFormatted;f.accessoryItemCurrencySymbol=c.currencySymbol;f.accessoryItemPriceDecimal=c.priceDecimal;e(f,"attach.ABBShowMiniDP.4")}}},getSimpleBundlePageState:function(){var b=a.$(".simpleBundleJavascriptParameters").find("script").html();return a.parseJSON(b)},getCheckboxCollectionObject:k,setupAddToCart:function(e,g,k,h,m){function t(e,y){if(u){var r=a.$(e.currentTarget);if(c.isBuyNow(r)){var p=C.find("*[name\x3d'quantity']").val()||1,t=n(k,g,p);c.checkoutWith(t.selectedLineItems,
r)}else if(b.isBuyBack(r))p=C.find("*[name\x3d'quantity']").val()||1,t=n(k,g,p),b.checkoutWith(t.selectedLineItems,r);else return}var v=d.createAddToCartRequest(m,function(){y()},function(){q.ueLogError&&q.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"});y()}),p=C.find("*[name\x3d'quantity']").val()||1,t=n(k,g,p);f(v,t.selectedLineItems,h);r=t.unselectedItems.filter(function(a){return a.isVisible});
h.logNexusAddBaseToCart(t.selectedLineItems,r,p);p=v.count();0!==p&&(r=a.$(e.currentTarget),c.isBuyNow(r)?c.checkoutWith(t.selectedLineItems,r):b.isBuyBack(r)?b.checkoutWith(t.selectedLineItems,r):(u=!0,e.preventDefault(),h.logAddToCart(p),v.call()))}var u=!1,C=e;e.unbind("submit.SimpleBundleSubmitHandler");e.bind("submit.SimpleBundleSubmitHandler",function(b){var c=a.$(this);t(b,function(){c.submit()})});e.find(":submit").unbind("click.SBB");e.find(":submit").bind("click.SBB",function(b){var c=a.$(this),
d=c.closest(".a-accordion-row-container");d.length&&(C=d,"addToCart"!==e.attr("id")&&"buyNow"!==e.attr("id")||e.unbind("submit.SimpleBundleSubmitHandler"),t(b,function(){c.click()}))})},setupAddToCartForDeclarative:function(a,b,c,e,g,k){a.unbind("click.SimpleBundleClickHandler");a.bind("click.SimpleBundleClickHandler",function(a){a=d.createAddToCartRequest(g,function(){m.now("attach-external-atc-interceptor").execute(function(a){a&&l.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})})},
function(){q.ueLogError&&q.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"})});var h=k.find("*[name\x3d'quantity']").val()||1,l=n(c,b,h);f(a,l.selectedLineItems,e);var p=l.unselectedItems.filter(function(a){return a.isVisible});e.logNexusAddBaseToCart(l.selectedLineItems,p,h);if(h=a.count())e.logAddToCart(h),a.call()})},setupCheckboxes:function(b,c,d,e,f,g,h,m,l){var n=k(f,h);b.push(n);n.api.enable();
n.$element.data("asin",d.asin);n.$element.data("offeringID",d.offerListingId);n.$element.data("quantity",1);a.on("a:dropdown:mobileQuantityDropDown:select",function(a){n.$element.data("quantity",a.value)});a.on("a2idpx:buyback:discount-price",function(a){n.$element.change()});"SINGLE"===l&&n.$element.change(function(){n.api.isChecked()&&b.forEach(function(a,b){c!==b&&a.api.uncheck()})})},setupAddToCartForButton:function(b,c,d,f,g,k){function h(){var a=q.find("*[name\x3d'quantity']").val()||1,b=n(d,
c,a);e.addItems(k,b.selectedLineItems,f);var g=b.unselectedItems.filter(function(a){return a.isVisible});m.now("attach-external-atc-interceptor").execute(function(a){a&&b.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})});f.logNexusAddBaseToCart(b.selectedLineItems,g,a);f.logAddToCart(b.selectedLineItems.length)}var q=k;b.unbind("click.button.SBB");b.bind("click.button.SBB",function(){var b=a.$(this).closest(".a-accordion-row-container");b.length&&(q=b);h()})}}});m.when("A","ready").register("abb-buynow-api",
function(a){var h=function(d){return a.$(d+" \x3e input[name\x3dofferingID]")};return{addFormParams:function(d,c){var e=a.$(d+" \x3e input[name\x3dasin]"),b=h(d);d=a.$(d+" \x3e input[name\x3dquantity]");if((e=a.$(e))&&0!==e.length&&e.val()&&-1===e.val().indexOf(c.asin)&&a.$(d)&&0!==a.$(d).length&&a.$(d).val()&&a.$(b)&&0!==a.$(b).length&&a.$(b).val()){var g=e.val()+"|"+c.asin,k=a.$(b).val()+"|"+c.offeringID;c=a.$(d).val()+"|"+c.quantity;e.val(g);a.$(b).val(k);a.$(d).val(c)}},removeFormParams:function(d,
c){var e=a.$(d+" \x3e input[name\x3dasin]"),b=h(d);d=a.$(d+" \x3e input[name\x3dquantity]");if((e=a.$(e))&&0!==e.length&&e.val()&&-1!==e.val().indexOf(c.asin)&&a.$(d)&&0!==a.$(d).length&&a.$(d).val()&&a.$(b)&&0!==a.$(b).length&&a.$(b).val()){var g=e.val().split("|");c=g.indexOf(c.asin);g.splice(c,1);e.val(g.join("|"));e=a.$(b).val().split("|");e.splice(c,1);a.$(b).val(e.join("|"));b=a.$(d).val().split("|");b.splice(c,1);a.$(d).val(b.join("|"))}}}});"use strict";m.when("A").register("aloha-uatc",function(a){function h(d,
c,e,b,g){var k=0;g=g||5E3;b=b||e;var f={clientName:"AmazonWireless"};f.verificationSessionID=d;return{count:function(){return k},call:function(){k&&a.post("/gp/add-to-cart/json",{timeout:g,params:f,success:c,error:e,abort:b})},addItem:function(a,b,c){f["ASIN."+k]=a;f["offerListingID."+k]=b;f["quantity."+k]=c||1;k++}}}return{createAddToCartRequest:h,createSingleFinalCallbackAddToCartRequest:function(a,c){return h(a,c,c,c)}}});"use strict";m.when("A").register("aloha-buy-now-integration",function(a){var h=
a.$,d={};m.when("turbo-checkout-buy-now-integration").execute(function(a){d=a});return{isBuyNow:function(a){return 0===Object.entries(d).length&&d.constructor===Object?"buy-now-button"===a.attr("id")||"addToCart"===a.attr("id"):"function"===typeof d.isBuyNow&&d.isBuyNow(a)||"buy-now-button"===a.attr("id")},checkoutWith:function(a,e){if(0===Object.entries(d).length&&d.constructor===Object){var b;for(b=1;0<e.find('input[name\x3d"asin.'+b+'"]').length||0<e.find('input[name\x3d"offeringID.'+b+'"]').length;)b++;
for(var g=[],k=0;k<a.length;k++){var f=a[k];if(f!==v&&f.asin&&f.offerListingId){var n=b,f=[h("\x3cinput /\x3e",{type:"hidden",name:"asin."+n,value:f.asin}),h("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+n,value:f.offerListingId}),h("\x3cinput /\x3e",{type:"hidden",name:"quantity."+n,value:f.quantity||1})];Array.prototype.push.apply(g,f);b++}else logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',f)}a=e.find('input[name\x3d"itemCount"]');
1===a.length?a.val(b):e.append(h("\x3cinput /\x3e",{type:"hidden",name:"itemCount",value:b}));e.append.apply(e,g)}else return d.checkoutWith(a,e)}}});"use strict";m.when("A").register("aloha-buy-back-integration",function(a){var h=a.$;return{isBuyBack:function(a){return"buyBackBuyNow"===a.attr("id")},checkoutWith:function(a,c){var e;for(e=1;0<c.find('input[name\x3d"asin.'+e+'"]').length||0<c.find('input[name\x3d"offeringID.'+e+'"]').length;)e++;for(var b=[],g=0;g<a.length;g++){var k=a[g];if(k!==v&&
k.asin&&k.offerListingId){var f=e,k=[h("\x3cinput /\x3e",{type:"hidden",name:"asin."+f,value:k.asin}),h("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+f,value:k.offerListingId}),h("\x3cinput /\x3e",{type:"hidden",name:"quantity."+f,value:k.quantity||1})];Array.prototype.push.apply(b,k);e++}else logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',k)}a=c.find('input[name\x3d"itemCount"]');1===a.length?a.val(e):c.append(h("\x3cinput /\x3e",
{type:"hidden",name:"itemCount",value:e}));c.append.apply(c,b)}}});"use strict";m.when("A").register("aloha-buybox-form-util",function(a){function h(a){for(var c=2;0<a.find('input[name\x3d"asin.'+c+'"]').length||0<a.find('input[name\x3d"offeringID.'+c+'"]').length;)c++;return c}function d(a,c){for(;0<a.find('input[name\x3d"asin.'+c+'"]').length||0<a.find('input[name\x3d"offeringID.'+c+'"]').length;)c++;return c}function c(b,c){return[a.$("\x3cinput /\x3e",{type:"hidden",name:"asin."+c,value:b.asin,
class:"aloha-accessory-form-input"}),a.$("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+c,value:b.offerListingId,class:"aloha-accessory-form-input"}),a.$("\x3cinput /\x3e",{type:"hidden",name:"quantity."+c,value:b.quantity||1,class:"aloha-accessory-form-input"})]}var e=[];a.on("aloha:detailPage:reappear",function(){e=[];a.$(".aloha-accessory-form-input").remove()});return{addItems:function(a,g,k){var f=h(a);g.forEach(function(g){if(g!==v&&g.asin&&g.offerListingId){f=d(a,f);var h=c(g,f);h.forEach(function(c){a.append(c)});
e.push(h);f++;k&&(k.logCheckboxSelected(g.index,g.quantity),k.logAddToCartRefTag(g.index))}});g=a.find('input[name\x3d"itemCount"]');0===g.length?a.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+f+'"\x3e'):g[0].value=f}}})});
/* ******** */
